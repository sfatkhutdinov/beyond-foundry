<div class="beyond-foundry-auth-dialog">
  <div class="auth-header">
    <h2>D&D Beyond Authentication</h2>
    <p>Connect to your D&D Beyond account to import characters and content.</p>
  </div>

  <div class="proxy-status">
    <label>Proxy Status:</label>
    <span class="status-indicator">
      {{#if isConnected}}
        <i class="fas fa-check-circle" style="color: green;"></i> Connected
      {{else}}
        <i class="fas fa-question-circle" style="color: orange;"></i> Unknown
      {{/if}}
    </span>
    <button type="button" class="test-connection">Test Connection</button>
  </div>

  <form class="auth-form">
    <div class="form-group">
      <label for="cobalt-token">Cobalt Session Token:</label>
      <input 
        type="password" 
        id="cobalt-token" 
        name="cobaltToken" 
        placeholder="Paste your CobaltSession cookie value here"
        required
      />
      <small class="form-hint">
        This is the CobaltSession cookie from your D&D Beyond login.
        <button type="button" class="help-button">How to find this?</button>
      </small>
    </div>

    <div class="form-actions">
      <button type="submit" class="primary">
        <i class="fas fa-sign-in-alt"></i> Authenticate
      </button>
      <button type="button" class="secondary" onclick="this.closest('.app').querySelector('.close').click()">
        Cancel
      </button>
    </div>
  </form>

  <div class="auth-footer">
    <small>
      <strong>Privacy:</strong> Your token is stored locally and only used to connect to the ddb-proxy.
      It's never sent to third parties.
    </small>
  </div>
</div>

<style>
.beyond-foundry-auth-dialog {
  padding: 1rem;
}

.auth-header {
  margin-bottom: 1rem;
  text-align: center;
}

.auth-header h2 {
  margin: 0 0 0.5rem 0;
  color: var(--color-text-dark-primary);
}

.proxy-status {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin-bottom: 1rem;
  padding: 0.5rem;
  background: var(--color-bg);
  border-radius: 4px;
}

.status-indicator {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.test-connection {
  margin-left: auto;
  padding: 0.25rem 0.5rem;
  font-size: 0.8rem;
}

.form-group {
  margin-bottom: 1rem;
}

.form-group label {
  display: block;
  margin-bottom: 0.25rem;
  font-weight: bold;
}

.form-group input {
  width: 100%;
  padding: 0.5rem;
  border: 1px solid var(--color-border-light);
  border-radius: 4px;
  font-family: monospace;
}

.form-hint {
  display: block;
  margin-top: 0.25rem;
  color: var(--color-text-light-6);
  font-size: 0.8rem;
}

.help-button {
  background: none;
  border: none;
  color: var(--color-text-hyperlink);
  text-decoration: underline;
  cursor: pointer;
  font-size: inherit;
  padding: 0;
}

.form-actions {
  display: flex;
  gap: 0.5rem;
  justify-content: flex-end;
  margin-top: 1.5rem;
}

.form-actions button {
  padding: 0.5rem 1rem;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.form-actions .primary {
  background: var(--color-button-primary-bg);
  color: var(--color-button-primary-text);
}

.form-actions .primary:hover {
  background: var(--color-button-primary-bg-hover);
}

.form-actions .secondary {
  background: var(--color-button-secondary-bg);
  color: var(--color-button-secondary-text);
}

.auth-footer {
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid var(--color-border-light);
  text-align: center;
}
</style>
