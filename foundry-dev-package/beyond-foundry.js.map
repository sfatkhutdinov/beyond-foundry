{"version":3,"file":"beyond-foundry.js","sources":["../src/module/constants.ts","../src/module/utils/settings.ts","../src/module/utils/logger.ts","../src/parsers/character/CharacterParser.ts","../src/module/api/BeyondFoundryAPI.ts","../src/module/apps/AuthDialog.ts","../src/module/apps/CharacterImportDialog.ts","../src/module/beyond-foundry.ts"],"sourcesContent":["// Module constants\nexport const MODULE_ID = 'beyond-foundry';\nexport const MODULE_NAME = 'Beyond Foundry';\n\n// API endpoints - configured for Docker environment\nexport const DEFAULT_PROXY_URL = 'http://localhost:3100';\nexport const DOCKER_PROXY_URL = 'http://ddb-proxy:3000';\n\n// D&D Beyond API constants\nexport const DDB_BASE_URL = 'https://www.dndbeyond.com';\nexport const DDB_API_BASE = 'https://character-service.dndbeyond.com';\n\n// Settings keys\nexport const SETTINGS = {\n  PROXY_URL: 'proxyUrl',\n  USE_DOCKER_PROXY: 'useDockerProxy',\n  API_ENDPOINT: 'apiEndpoint',\n  DEBUG_MODE: 'debugMode',\n  AUTO_IMPORT_ITEMS: 'autoImportItems',\n  IMPORT_POLICY: 'importPolicy',\n  COBALT_TOKEN: 'cobaltToken',\n} as const;\n\n// Default import options\nexport const DEFAULT_IMPORT_OPTIONS = {\n  importItems: true,\n  importSpells: true,\n  updateExisting: false,\n  createCompendiumItems: true,\n};\n","import { MODULE_ID, SETTINGS, DEFAULT_PROXY_URL, DOCKER_PROXY_URL } from '../constants.js';\nimport type { ModuleSettings, ImportPolicy } from '../../types/index.js';\n\n/**\n * Register all module settings\n */\nexport function registerSettings(): void {\n  // Proxy configuration\n  game.settings.register(MODULE_ID, SETTINGS.PROXY_URL, {\n    name: 'beyond-foundry.settings.proxyUrl.name',\n    hint: 'beyond-foundry.settings.proxyUrl.hint',\n    scope: 'world',\n    config: true,\n    type: String,\n    default: DEFAULT_PROXY_URL,\n    onChange: () => window.location.reload(),\n  });\n\n  game.settings.register(MODULE_ID, SETTINGS.USE_DOCKER_PROXY, {\n    name: 'beyond-foundry.settings.useDockerProxy.name',\n    hint: 'beyond-foundry.settings.useDockerProxy.hint',\n    scope: 'world',\n    config: true,\n    type: Boolean,\n    default: false,\n    onChange: (value: boolean) => {\n      if (value) {\n        game.settings.set(MODULE_ID, SETTINGS.PROXY_URL, DOCKER_PROXY_URL);\n      } else {\n        game.settings.set(MODULE_ID, SETTINGS.PROXY_URL, DEFAULT_PROXY_URL);\n      }\n    },\n  });\n\n  // API configuration\n  game.settings.register(MODULE_ID, SETTINGS.API_ENDPOINT, {\n    name: 'beyond-foundry.settings.apiEndpoint.name',\n    hint: 'beyond-foundry.settings.apiEndpoint.hint',\n    scope: 'world',\n    config: true,\n    type: String,\n    default: '',\n    onChange: () => window.location.reload(),\n  });\n\n  // Debug mode\n  game.settings.register(MODULE_ID, SETTINGS.DEBUG_MODE, {\n    name: 'beyond-foundry.settings.debugMode.name',\n    hint: 'beyond-foundry.settings.debugMode.hint',\n    scope: 'client',\n    config: true,\n    type: Boolean,\n    default: false,\n  });\n\n  // Import options\n  game.settings.register(MODULE_ID, SETTINGS.AUTO_IMPORT_ITEMS, {\n    name: 'beyond-foundry.settings.autoImportItems.name',\n    hint: 'beyond-foundry.settings.autoImportItems.hint',\n    scope: 'world',\n    config: true,\n    type: Boolean,\n    default: true,\n  });\n\n  game.settings.register(MODULE_ID, SETTINGS.IMPORT_POLICY, {\n    name: 'beyond-foundry.settings.importPolicy.name',\n    hint: 'beyond-foundry.settings.importPolicy.hint',\n    scope: 'world',\n    config: true,\n    type: String,\n    choices: {\n      ask: 'beyond-foundry.settings.importPolicy.ask',\n      update: 'beyond-foundry.settings.importPolicy.update',\n      replace: 'beyond-foundry.settings.importPolicy.replace',\n      skip: 'beyond-foundry.settings.importPolicy.skip',\n    },\n    default: 'ask',\n  });\n\n  // Authentication\n  game.settings.register(MODULE_ID, SETTINGS.COBALT_TOKEN, {\n    name: 'beyond-foundry.settings.cobaltToken.name',\n    hint: 'beyond-foundry.settings.cobaltToken.hint',\n    scope: 'world',\n    config: false, // Hidden from UI - managed by auth dialog\n    type: String,\n    default: '',\n  });\n}\n\n/**\n * Get a module setting value\n */\nexport function getModuleSetting<T = any>(settingKey: string): T {\n  return game.settings.get(MODULE_ID, settingKey) as T;\n}\n\n/**\n * Set a module setting value\n */\nexport function setModuleSetting(settingKey: string, value: any): Promise<any> {\n  return game.settings.set(MODULE_ID, settingKey, value);\n}\n\n/**\n * Get all module settings as a typed object\n */\nexport function getModuleSettings(): ModuleSettings {\n  return {\n    proxyUrl: getModuleSetting(SETTINGS.PROXY_URL),\n    useDockerProxy: getModuleSetting(SETTINGS.USE_DOCKER_PROXY),\n    apiEndpoint: getModuleSetting(SETTINGS.API_ENDPOINT),\n    debugMode: getModuleSetting(SETTINGS.DEBUG_MODE),\n    autoImportItems: getModuleSetting(SETTINGS.AUTO_IMPORT_ITEMS),\n    importPolicy: getModuleSetting(SETTINGS.IMPORT_POLICY) as ImportPolicy,\n    cobaltToken: getModuleSetting(SETTINGS.COBALT_TOKEN),\n  };\n}\n","import { MODULE_ID } from '../constants.js';\n\n/**\n * Logger utility for Beyond Foundry module\n */\nexport class Logger {\n  private static moduleId = MODULE_ID;\n\n  static log(message: string, level: 'info' | 'warn' | 'error' | 'debug' = 'info'): void {\n    const prefix = `${this.moduleId} |`;\n\n    switch (level) {\n      case 'info':\n        console.log(prefix, message);\n        break;\n      case 'warn':\n        console.warn(prefix, message);\n        break;\n      case 'error':\n        console.error(prefix, message);\n        break;\n      case 'debug':\n        if (game.settings.get(MODULE_ID, 'debugMode')) {\n          console.log(`${prefix} [DEBUG]`, message);\n        }\n        break;\n    }\n  }\n\n  static info(message: string): void {\n    this.log(message, 'info');\n  }\n\n  static warn(message: string): void {\n    this.log(message, 'warn');\n  }\n\n  static error(message: string): void {\n    this.log(message, 'error');\n  }\n\n  static debug(message: string): void {\n    this.log(message, 'debug');\n  }\n}\n\n// Convenience export\nexport const log = Logger.log.bind(Logger);\n\n/**\n * Safely extract error message from unknown error type\n */\nexport function getErrorMessage(error: unknown): string {\n  if (error instanceof Error) {\n    return error.message;\n  }\n  return String(error);\n}\n","import { Logger } from '../../module/utils/logger.js';\nimport type {\n  DDBCharacter,\n  FoundryActor,\n  DDBClass,\n  DDBModifier,\n  DDBItem,\n  DDBSpell,\n} from '../../types/index.js';\n\n/**\n * Comprehensive Character Parser for D&D Beyond to FoundryVTT D&D 5e system\n *\n * This parser implements advanced features including:\n * - Enhanced abilities with saving throw proficiencies from modifiers\n * - Skills with proficiency detection and passive scores\n * - Proper HP calculation with Constitution modifier\n * - Equipment parsing (weapons, armor, gear, magical items)\n * - Spell system with slot calculation and spellcasting attributes\n * - Movement and senses parsing (darkvision, etc.)\n * - Currency and encumbrance calculations\n * - Complete FoundryVTT D&D 5e actor structure\n */\nexport class CharacterParser {\n  /**\n   * Parse a complete D&D Beyond character into FoundryVTT actor data\n   * @param ddbCharacter - The D&D Beyond character data\n   * @returns Foundry actor data with comprehensive parsing\n   */\n  public static parseCharacter(ddbCharacter: DDBCharacter): FoundryActor {\n    Logger.info(`🔮 Comprehensive parsing: ${ddbCharacter.name}`);\n\n    const actorData: FoundryActor = {\n      name: ddbCharacter.name,\n      type: 'character',\n      img: ddbCharacter.decorations?.avatarUrl || 'icons/svg/mystery-man.svg',\n      system: {\n        abilities: this.parseAbilities(ddbCharacter),\n        attributes: this.parseEnhancedAttributes(ddbCharacter),\n        details: this.parseDetails(ddbCharacter),\n        traits: this.parseTraits(ddbCharacter),\n        currency: this.parseCurrency(ddbCharacter),\n        skills: this.parseSkills(ddbCharacter),\n        spells: this.parseSpells(ddbCharacter),\n        resources: this.parseResources(ddbCharacter),\n        bonuses: this.parseBonuses(ddbCharacter),\n      },\n      items: this.parseAllItems(ddbCharacter),\n      effects: this.parseActiveEffects(ddbCharacter),\n      flags: {\n        'beyond-foundry': {\n          ddbCharacterId: ddbCharacter.id,\n          lastSync: Date.now(),\n          originalData: ddbCharacter,\n          parsingVersion: '2.0.0',\n          features: [\n            'enhanced-abilities',\n            'equipment-parsing',\n            'spell-integration',\n            'modifier-system',\n            'comprehensive-traits',\n          ],\n        },\n      },\n    };\n\n    Logger.info(`✅ Comprehensive parsing complete: ${actorData.name}`);\n    return actorData;\n  }\n\n  /**\n   * Parse abilities with all modifiers and proficiencies\n   */\n  private static parseAbilities(ddbCharacter: DDBCharacter) {\n    const abilities: any = {};\n    const abilityMap: Record<number, string> = {\n      1: 'str',\n      2: 'dex',\n      3: 'con',\n      4: 'int',\n      5: 'wis',\n      6: 'cha',\n    };\n\n    // Initialize abilities\n    Object.values(abilityMap).forEach(key => {\n      abilities[key] = {\n        value: 10,\n        proficient: 0,\n        bonuses: { check: '', save: '' },\n        min: 3,\n        mod: 0,\n      };\n    });\n\n    // Apply base stats\n    if (ddbCharacter.stats) {\n      ddbCharacter.stats.forEach(stat => {\n        const abilityKey = abilityMap[stat.id];\n        if (abilityKey) {\n          abilities[abilityKey].value = stat.value || 10;\n          abilities[abilityKey].mod = this.getAbilityModifier(stat.value || 10);\n        }\n      });\n    }\n\n    // Apply saving throw proficiencies\n    this.applySavingThrowProficiencies(ddbCharacter, abilities);\n\n    return abilities;\n  }\n\n  /**\n   * Apply saving throw proficiencies from modifiers\n   */\n  private static applySavingThrowProficiencies(ddbCharacter: DDBCharacter, abilities: any) {\n    const modifiers = ddbCharacter.modifiers || {};\n    const abilityMap = { 1: 'str', 2: 'dex', 3: 'con', 4: 'int', 5: 'wis', 6: 'cha' };\n\n    Object.values(modifiers).forEach(modifierArray => {\n      if (Array.isArray(modifierArray)) {\n        modifierArray.forEach(modifier => {\n          if (modifier.type === 'proficiency' && modifier.subType === 'saving-throws') {\n            const abilityKey = abilityMap[modifier.entityId as keyof typeof abilityMap];\n            if (abilityKey && abilities[abilityKey]) {\n              abilities[abilityKey].proficient = 1;\n              Logger.debug(`💾 Save proficiency: ${abilityKey.toUpperCase()}`);\n            }\n          }\n        });\n      }\n    });\n  }\n\n  /**\n   * Parse character attributes (HP, AC, etc.)\n   */\n  private static parseAttributes(ddbCharacter: DDBCharacter) {\n    return {\n      ac: {\n        flat: null,\n        calc: 'default',\n        formula: '',\n      },\n      hp: {\n        value: ddbCharacter.baseHitPoints || 0,\n        max: ddbCharacter.baseHitPoints || 0,\n        temp: 0,\n        tempmax: 0,\n        bonuses: {\n          level: '',\n          overall: '',\n        },\n      },\n      init: {\n        ability: 'dex',\n        bonus: 0,\n      },\n      movement: this.parseMovement(ddbCharacter),\n      senses: this.parseSenses(ddbCharacter),\n      spellcasting: ddbCharacter.spellcastingAbilityId\n        ? this.getAbilityKey(ddbCharacter.spellcastingAbilityId)\n        : '',\n      prof: this.calculateProficiencyBonus(ddbCharacter.classes || []),\n      spelldc: 8, // Will be calculated based on spellcasting ability\n    };\n  }\n\n  /**\n   * Parse character details with comprehensive class and level information\n   */\n  private static parseDetails(ddbCharacter: DDBCharacter) {\n    const totalLevel = this.getTotalLevel(ddbCharacter);\n    const primaryClass = this.getPrimaryClass(ddbCharacter);\n\n    return {\n      biography: {\n        value: ddbCharacter.notes?.backstory || '',\n        public: '',\n      },\n      alignment: ddbCharacter.alignmentId ? this.parseAlignment(ddbCharacter.alignmentId) : '',\n      race: ddbCharacter.race?.fullName || '',\n      background: ddbCharacter.background?.definition?.name || '',\n      originalClass: primaryClass,\n      level: totalLevel,\n      classes: this.parseClassDetails(ddbCharacter),\n      xp: {\n        value: ddbCharacter.currentXp || 0,\n        max: this.getXpForLevel(totalLevel + 1),\n        pct: 0,\n      },\n      appearance: ddbCharacter.notes?.appearance || '',\n      trait: ddbCharacter.notes?.personalityTraits || '',\n      ideal: ddbCharacter.notes?.ideals || '',\n      bond: ddbCharacter.notes?.bonds || '',\n      flaw: ddbCharacter.notes?.flaws || '',\n    };\n  }\n\n  /**\n   * Parse detailed class information\n   */\n  private static parseClassDetails(ddbCharacter: DDBCharacter): any {\n    if (!ddbCharacter.classes) return {};\n\n    const classDetails: any = {};\n    ddbCharacter.classes.forEach(cls => {\n      const className = cls.definition.name.toLowerCase();\n      classDetails[className] = {\n        levels: cls.level,\n        subclass: cls.subclassDefinition?.name || '',\n        hitDie: cls.definition.hitDie,\n      };\n    });\n\n    return classDetails;\n  }\n\n  /**\n   * Parse character traits with enhanced resistances, languages, and proficiencies\n   */\n  private static parseTraits(ddbCharacter: DDBCharacter) {\n    return {\n      size: this.parseSize(ddbCharacter.race?.size || 'medium'),\n      senses: '',\n      languages: {\n        value: this.parseLanguages(ddbCharacter),\n        custom: '',\n      },\n      di: { value: [], custom: '' }, // Damage immunities\n      dr: { value: [], custom: '' }, // Damage resistances\n      dv: { value: [], custom: '' }, // Damage vulnerabilities\n      ci: { value: [], custom: '' }, // Condition immunities\n      weaponProf: {\n        value: this.parseWeaponProficiencies(ddbCharacter),\n        custom: '',\n      },\n      armorProf: {\n        value: this.parseArmorProficiencies(ddbCharacter),\n        custom: '',\n      },\n      toolProf: {\n        value: this.parseToolProficiencies(ddbCharacter),\n        custom: '',\n      },\n    };\n  }\n\n  /**\n   * Parse weapon proficiencies from modifiers\n   */\n  private static parseWeaponProficiencies(ddbCharacter: DDBCharacter): string[] {\n    const proficiencies: string[] = [];\n    const modifiers = ddbCharacter.modifiers || {};\n\n    Object.values(modifiers).forEach(modifierArray => {\n      if (Array.isArray(modifierArray)) {\n        modifierArray.forEach(modifier => {\n          if (\n            modifier.type === 'proficiency' &&\n            modifier.subType &&\n            modifier.subType.includes('weapon')\n          ) {\n            proficiencies.push(modifier.friendlySubtypeName || modifier.subType);\n          }\n        });\n      }\n    });\n\n    return proficiencies;\n  }\n\n  /**\n   * Parse armor proficiencies from modifiers\n   */\n  private static parseArmorProficiencies(ddbCharacter: DDBCharacter): string[] {\n    const proficiencies: string[] = [];\n    const modifiers = ddbCharacter.modifiers || {};\n\n    Object.values(modifiers).forEach(modifierArray => {\n      if (Array.isArray(modifierArray)) {\n        modifierArray.forEach(modifier => {\n          if (\n            modifier.type === 'proficiency' &&\n            modifier.subType &&\n            modifier.subType.includes('armor')\n          ) {\n            proficiencies.push(modifier.friendlySubtypeName || modifier.subType);\n          }\n        });\n      }\n    });\n\n    return proficiencies;\n  }\n\n  /**\n   * Parse tool proficiencies from modifiers\n   */\n  private static parseToolProficiencies(ddbCharacter: DDBCharacter): string[] {\n    const proficiencies: string[] = [];\n    const modifiers = ddbCharacter.modifiers || {};\n\n    Object.values(modifiers).forEach(modifierArray => {\n      if (Array.isArray(modifierArray)) {\n        modifierArray.forEach(modifier => {\n          if (\n            modifier.type === 'proficiency' &&\n            modifier.subType &&\n            (modifier.subType.includes('tool') || modifier.subType.includes('kit'))\n          ) {\n            proficiencies.push(modifier.friendlySubtypeName || modifier.subType);\n          }\n        });\n      }\n    });\n\n    return proficiencies;\n  }\n\n  /**\n   * Parse currency from D&D Beyond\n   */\n  private static parseCurrency(ddbCharacter: DDBCharacter) {\n    const currencies = ddbCharacter.currencies || { cp: 0, sp: 0, ep: 0, gp: 0, pp: 0 };\n    return {\n      pp: currencies.pp || 0,\n      gp: currencies.gp || 0,\n      ep: currencies.ep || 0,\n      sp: currencies.sp || 0,\n      cp: currencies.cp || 0,\n    };\n  }\n\n  /**\n   * Parse skills and proficiencies with comprehensive proficiency detection\n   */\n  private static parseSkills(ddbCharacter: DDBCharacter) {\n    const skills: any = {};\n\n    // D&D 5e system skills\n    const skillList = [\n      'acr',\n      'ani',\n      'arc',\n      'ath',\n      'dec',\n      'his',\n      'ins',\n      'itm',\n      'inv',\n      'med',\n      'nat',\n      'prc',\n      'prf',\n      'per',\n      'rel',\n      'slt',\n      'ste',\n      'sur',\n    ];\n\n    skillList.forEach(skill => {\n      skills[skill] = {\n        value: 0, // 0 = not proficient, 1 = proficient, 2 = expertise\n        ability: this.getSkillAbility(skill),\n        bonuses: {\n          check: '',\n          passive: '',\n        },\n      };\n    });\n\n    // Apply skill proficiencies from modifiers\n    this.applySkillProficiencies(ddbCharacter, skills);\n\n    return skills;\n  }\n\n  /**\n   * Apply skill proficiencies from D&D Beyond modifiers\n   */\n  private static applySkillProficiencies(ddbCharacter: DDBCharacter, skills: any) {\n    const modifiers = ddbCharacter.modifiers || {};\n\n    Object.values(modifiers).forEach(modifierArray => {\n      if (Array.isArray(modifierArray)) {\n        modifierArray.forEach(modifier => {\n          if (modifier.type === 'proficiency' && modifier.subType) {\n            const skillKey = this.getSkillKeyFromModifier(modifier);\n            if (skillKey && skills[skillKey]) {\n              skills[skillKey].value = 1; // Proficient\n              Logger.debug(`🎯 Skill proficiency: ${skillKey}`);\n            }\n          }\n\n          if (modifier.type === 'expertise' && modifier.subType) {\n            const skillKey = this.getSkillKeyFromModifier(modifier);\n            if (skillKey && skills[skillKey]) {\n              skills[skillKey].value = 2; // Expertise\n              Logger.debug(`⭐ Skill expertise: ${skillKey}`);\n            }\n          }\n        });\n      }\n    });\n  }\n\n  /**\n   * Parse spell-related attributes with comprehensive spell slot calculation\n   */\n  private static parseSpells(ddbCharacter: DDBCharacter) {\n    const primaryClass = this.getPrimarySpellcastingClass(ddbCharacter);\n    const spellSlots = primaryClass\n      ? this.calculateSpellSlots(primaryClass.definition.name, primaryClass.level)\n      : {};\n\n    return {\n      spell1: { value: spellSlots.spell1 || 0, override: null, max: spellSlots.spell1 || 0 },\n      spell2: { value: spellSlots.spell2 || 0, override: null, max: spellSlots.spell2 || 0 },\n      spell3: { value: spellSlots.spell3 || 0, override: null, max: spellSlots.spell3 || 0 },\n      spell4: { value: spellSlots.spell4 || 0, override: null, max: spellSlots.spell4 || 0 },\n      spell5: { value: spellSlots.spell5 || 0, override: null, max: spellSlots.spell5 || 0 },\n      spell6: { value: spellSlots.spell6 || 0, override: null, max: spellSlots.spell6 || 0 },\n      spell7: { value: spellSlots.spell7 || 0, override: null, max: spellSlots.spell7 || 0 },\n      spell8: { value: spellSlots.spell8 || 0, override: null, max: spellSlots.spell8 || 0 },\n      spell9: { value: spellSlots.spell9 || 0, override: null, max: spellSlots.spell9 || 0 },\n      pact: { value: 0, override: null, max: 0, level: 1 },\n      spells0: { value: 0, max: 0 },\n      spells1: { value: 0, max: 0 },\n      spells2: { value: 0, max: 0 },\n      spells3: { value: 0, max: 0 },\n      spells4: { value: 0, max: 0 },\n      spells5: { value: 0, max: 0 },\n      spells6: { value: 0, max: 0 },\n      spells7: { value: 0, max: 0 },\n      spells8: { value: 0, max: 0 },\n      spells9: { value: 0, max: 0 },\n    };\n  }\n\n  /**\n   * Parse character resources (inspiration, etc.)\n   */\n  private static parseResources(ddbCharacter: DDBCharacter) {\n    return {\n      primary: { value: 0, max: 0, sr: false, lr: false, label: '' },\n      secondary: { value: 0, max: 0, sr: false, lr: false, label: '' },\n      tertiary: { value: 0, max: 0, sr: false, lr: false, label: '' },\n    };\n  }\n\n  // Helper methods\n\n  private static isProficientInSave(ddbCharacter: DDBCharacter, abilityId: number): number {\n    // Check if character is proficient in this saving throw\n    // This would need to be implemented based on D&D Beyond data structure\n    return 0;\n  }\n\n  private static parseMovement(ddbCharacter: DDBCharacter) {\n    return {\n      burrow: 0,\n      climb: 0,\n      fly: 0,\n      swim: 0,\n      walk: ddbCharacter.race?.weightSpeeds?.normal?.walk || 30,\n      units: 'ft',\n      hover: false,\n    };\n  }\n\n  private static parseSenses(ddbCharacter: DDBCharacter) {\n    return {\n      darkvision: 0,\n      blindsight: 0,\n      tremorsense: 0,\n      truesight: 0,\n      units: 'ft',\n      special: '',\n    };\n  }\n\n  private static calculateProficiencyBonus(classes: any[]): number {\n    const totalLevel = classes.reduce((sum, cls) => sum + (cls.level || 0), 0);\n    return Math.ceil(totalLevel / 4) + 1;\n  }\n\n  private static getAbilityKey(abilityId: number): string {\n    const map: Record<number, string> = {\n      1: 'str',\n      2: 'dex',\n      3: 'con',\n      4: 'int',\n      5: 'wis',\n      6: 'cha',\n    };\n    return map[abilityId] || '';\n  }\n\n  private static parseAlignment(alignmentId: number): string {\n    const alignments: Record<number, string> = {\n      1: 'lg',\n      2: 'ln',\n      3: 'le',\n      4: 'ng',\n      5: 'n',\n      6: 'ne',\n      7: 'cg',\n      8: 'cn',\n      9: 'ce',\n    };\n    return alignments[alignmentId] || 'n';\n  }\n\n  private static parseSize(size: string): string {\n    const sizeMap: Record<string, string> = {\n      tiny: 'tiny',\n      small: 'sm',\n      medium: 'med',\n      large: 'lg',\n      huge: 'huge',\n      gargantuan: 'grg',\n    };\n    return sizeMap[size.toLowerCase()] || 'med';\n  }\n\n  private static parseLanguages(ddbCharacter: DDBCharacter): string[] {\n    const languages: string[] = [];\n\n    try {\n      // Check for language racial traits\n      if (ddbCharacter.race?.racialTraits && Array.isArray(ddbCharacter.race.racialTraits)) {\n        for (const trait of ddbCharacter.race.racialTraits) {\n          const definition = trait.definition;\n          if (definition && definition.name === 'Languages' && definition.description) {\n            // Extract language names from the description\n            const languageMatches = definition.description.match(\n              /\\b(Common|Elvish|Dwarvish|Halfling|Draconic|Giant|Gnomish|Goblin|Orcish|Abyssal|Celestial|Deep Speech|Infernal|Primordial|Sylvan|Undercommon|Druidic)\\b/gi\n            );\n            if (languageMatches) {\n              languages.push(...languageMatches.map(lang => lang.toLowerCase()));\n            }\n          }\n        }\n      }\n\n      // Check background languages\n      if (ddbCharacter.background?.definition?.languagesDescription) {\n        const bgLanguages = ddbCharacter.background.definition.languagesDescription;\n        // If it says \"Two of your choice\" or similar, we can't extract specific languages\n        if (!bgLanguages.includes('choice') && !bgLanguages.includes('any')) {\n          const languageMatches = bgLanguages.match(\n            /\\b(Common|Elvish|Dwarvish|Halfling|Draconic|Giant|Gnomish|Goblin|Orcish|Abyssal|Celestial|Deep Speech|Infernal|Primordial|Sylvan|Undercommon|Druidic)\\b/gi\n          );\n          if (languageMatches) {\n            languages.push(...languageMatches.map(lang => lang.toLowerCase()));\n          }\n        }\n      }\n\n      // Check for language proficiencies in modifiers\n      if (ddbCharacter.modifiers && typeof ddbCharacter.modifiers === 'object') {\n        for (const [key, modifierArray] of Object.entries(ddbCharacter.modifiers)) {\n          if (Array.isArray(modifierArray)) {\n            for (const modifier of modifierArray) {\n              if (modifier.type === 'language' && modifier.subType) {\n                const langName = modifier.subType.toLowerCase();\n                if (!languages.includes(langName)) {\n                  languages.push(langName);\n                }\n              }\n            }\n          }\n        }\n      }\n\n      // Remove duplicates and ensure Druidic is included for druids\n      const uniqueLanguages = [...new Set(languages)];\n\n      // Check if character is a druid and add Druidic if not already present\n      if (ddbCharacter.classes && Array.isArray(ddbCharacter.classes)) {\n        const isDruid = ddbCharacter.classes.some(cls =>\n          cls.definition?.name?.toLowerCase().includes('druid')\n        );\n        if (isDruid && !uniqueLanguages.includes('druidic')) {\n          uniqueLanguages.push('druidic');\n        }\n      }\n\n      return uniqueLanguages;\n    } catch (error) {\n      Logger.error(`Error parsing languages: ${error}`);\n      return ['common']; // Return at least Common as fallback\n    }\n  }\n\n  private static getSkillAbility(skill: string): string {\n    const skillAbilities: Record<string, string> = {\n      acr: 'dex',\n      ani: 'wis',\n      arc: 'int',\n      ath: 'str',\n      dec: 'cha',\n      his: 'int',\n      ins: 'wis',\n      itm: 'cha',\n      inv: 'int',\n      med: 'wis',\n      nat: 'int',\n      prc: 'wis',\n      prf: 'cha',\n      per: 'cha',\n      rel: 'int',\n      slt: 'dex',\n      ste: 'dex',\n      sur: 'wis',\n    };\n    return skillAbilities[skill] || 'int';\n  }\n\n  // ========== COMPREHENSIVE PARSING UTILITY METHODS ==========\n\n  private static getAbilityModifier(score: number): number {\n    return Math.floor((score - 10) / 2);\n  }\n\n  private static getTotalLevel(ddbCharacter: DDBCharacter): number {\n    if (!ddbCharacter.classes) return 1;\n    return ddbCharacter.classes.reduce((total, cls) => total + (cls.level || 0), 0) || 1;\n  }\n\n  private static getProficiencyBonus(level: number): number {\n    return Math.max(2, Math.ceil(level / 4) + 1);\n  }\n\n  private static getAbilityScore(ddbCharacter: DDBCharacter, statId: number): number {\n    if (!ddbCharacter.stats) return 10;\n    const stat = ddbCharacter.stats.find(s => s.id === statId);\n    return stat ? stat.value : 10;\n  }\n\n  private static getStatIdForAbility(ability: string): number {\n    const map = { str: 1, dex: 2, con: 3, int: 4, wis: 5, cha: 6 };\n    return map[ability as keyof typeof map] || 4;\n  }\n\n  private static getPrimaryClass(ddbCharacter: DDBCharacter): string {\n    if (!ddbCharacter.classes || ddbCharacter.classes.length === 0) return '';\n    const primaryClass = ddbCharacter.classes.reduce((prev, current) =>\n      (current.level || 0) > (prev.level || 0) ? current : prev\n    );\n    return primaryClass.definition?.name || '';\n  }\n\n  private static getPrimarySpellcastingClass(ddbCharacter: DDBCharacter): DDBClass | null {\n    if (!ddbCharacter.classes) return null;\n    const spellcastingClasses = ddbCharacter.classes.filter(\n      cls => cls.definition && this.isSpellcastingClass(cls.definition.name)\n    );\n    if (spellcastingClasses.length === 0) return null;\n    return spellcastingClasses.reduce((prev, current) =>\n      (current.level || 0) > (prev.level || 0) ? current : prev\n    );\n  }\n\n  private static getSpellcastingAbility(classObj: DDBClass | null): string {\n    if (!classObj || !classObj.definition) return 'int';\n    const abilities: Record<string, string> = {\n      druid: 'wis',\n      cleric: 'wis',\n      ranger: 'wis',\n      bard: 'cha',\n      sorcerer: 'cha',\n      warlock: 'cha',\n      paladin: 'cha',\n      wizard: 'int',\n      artificer: 'int',\n    };\n    return abilities[classObj.definition.name.toLowerCase()] || 'int';\n  }\n\n  private static isSpellcastingClass(className: string): boolean {\n    return [\n      'Artificer',\n      'Bard',\n      'Cleric',\n      'Druid',\n      'Paladin',\n      'Ranger',\n      'Sorcerer',\n      'Warlock',\n      'Wizard',\n    ].includes(className);\n  }\n\n  private static calculateSpellSlots(className: string, level: number): Record<string, number> {\n    const slots: Record<string, number> = {};\n    // Druid spell slot progression (full caster)\n    if (className === 'Druid') {\n      if (level >= 1) slots.spell1 = Math.min(4, Math.max(2, level === 1 ? 2 : level + 1));\n      if (level >= 3) slots.spell2 = Math.min(3, Math.floor((level + 1) / 2));\n      if (level >= 5) slots.spell3 = Math.min(3, Math.floor(level / 2) - 1);\n      if (level >= 7) slots.spell4 = Math.min(3, Math.floor(level / 4));\n      if (level >= 9) slots.spell5 = Math.min(2, Math.floor(level / 6));\n      if (level >= 11) slots.spell6 = 1;\n      if (level >= 13) slots.spell7 = 1;\n      if (level >= 15) slots.spell8 = 1;\n      if (level >= 17) slots.spell9 = 1;\n    }\n    return slots;\n  }\n\n  private static getAlignment(ddbCharacter: DDBCharacter): string {\n    if (!ddbCharacter.alignmentId) return '';\n    return this.parseAlignment(ddbCharacter.alignmentId);\n  }\n\n  private static getRaceSize(race: any): string {\n    if (!race) return 'med';\n    // Would parse from race data\n    return 'med';\n  }\n\n  private static getXpForLevel(level: number): number {\n    const xpTable = [\n      0, 300, 900, 2700, 6500, 14000, 23000, 34000, 48000, 64000, 85000, 100000, 120000, 140000,\n      165000, 195000, 225000, 265000, 305000, 355000,\n    ];\n    return xpTable[Math.min(level - 1, xpTable.length - 1)] || 355000;\n  }\n\n  private static getSkillKeyFromModifier(modifier: DDBModifier): string | null {\n    const skillMapping: Record<string, string> = {\n      acrobatics: 'acr',\n      'animal-handling': 'ani',\n      arcana: 'arc',\n      athletics: 'ath',\n      deception: 'dec',\n      history: 'his',\n      insight: 'ins',\n      intimidation: 'inti',\n      investigation: 'inv',\n      medicine: 'med',\n      nature: 'nat',\n      perception: 'per',\n      performance: 'prf',\n      persuasion: 'per',\n      religion: 'rel',\n      'sleight-of-hand': 'slt',\n      stealth: 'ste',\n      survival: 'sur',\n    };\n    return skillMapping[modifier.subType] || null;\n  }\n\n  private static getFoundryItemType(definition: any): string {\n    const typeMap: Record<string, string> = {\n      Weapon: 'weapon',\n      Armor: 'equipment',\n      Shield: 'equipment',\n      Gear: 'loot',\n      Tool: 'tool',\n      Potion: 'consumable',\n    };\n    return typeMap[definition.filterType] || 'loot';\n  }\n\n  private static getDefaultIcon(itemType: string): string {\n    const iconMap: Record<string, string> = {\n      weapon: 'icons/weapons/swords/sword-broad-silver.webp',\n      equipment: 'icons/equipment/chest/breastplate-scale-grey.webp',\n      loot: 'icons/containers/bags/pack-leather-brown.webp',\n    };\n    return iconMap[itemType] || 'icons/svg/item-bag.svg';\n  }\n\n  // ========== COMPREHENSIVE PARSING METHODS ==========\n\n  /**\n   * Parse enhanced attributes with spellcasting and encumbrance\n   */\n  private static parseEnhancedAttributes(ddbCharacter: DDBCharacter): any {\n    const totalLevel = this.getTotalLevel(ddbCharacter);\n    const constitutionMod = this.getAbilityModifier(this.getAbilityScore(ddbCharacter, 3));\n\n    // Enhanced HP calculation\n    const baseHP = ddbCharacter.baseHitPoints || 0;\n    const bonusHP = ddbCharacter.bonusHitPoints || 0;\n    const overrideHP = ddbCharacter.overrideHitPoints;\n    const removedHP = ddbCharacter.removedHitPoints || 0;\n\n    let maxHP;\n    if (overrideHP !== null && overrideHP !== undefined) {\n      maxHP = overrideHP;\n    } else {\n      maxHP = baseHP + constitutionMod * totalLevel + bonusHP;\n    }\n\n    const currentHP = Math.max(0, maxHP - removedHP);\n\n    // Spellcasting attributes\n    const primaryClass = this.getPrimarySpellcastingClass(ddbCharacter);\n    const spellcastingAbility = this.getSpellcastingAbility(primaryClass);\n    const spellcastingMod = this.getAbilityModifier(\n      this.getAbilityScore(ddbCharacter, this.getStatIdForAbility(spellcastingAbility))\n    );\n    const profBonus = this.getProficiencyBonus(totalLevel);\n\n    return {\n      ac: { flat: null, calc: 'default', formula: '' },\n      hp: {\n        value: currentHP,\n        max: maxHP,\n        temp: ddbCharacter.temporaryHitPoints || 0,\n        tempmax: 0,\n      },\n      init: {\n        ability: 'dex',\n        bonus: 0,\n        mod: this.getAbilityModifier(this.getAbilityScore(ddbCharacter, 2)),\n        prof: 0,\n        total: this.getAbilityModifier(this.getAbilityScore(ddbCharacter, 2)),\n      },\n      movement: this.parseMovement(ddbCharacter),\n      senses: this.parseSenses(ddbCharacter),\n      spellcasting: spellcastingAbility,\n      prof: profBonus,\n      spelldc: 8 + profBonus + spellcastingMod,\n      encumbrance: this.parseEncumbrance(ddbCharacter),\n    };\n  }\n\n  /**\n   * Parse encumbrance system\n   */\n  private static parseEncumbrance(ddbCharacter: DDBCharacter): any {\n    const strengthScore = this.getAbilityScore(ddbCharacter, 1); // Strength ID = 1\n    const carryingCapacity = strengthScore * 15;\n\n    return {\n      value: 0, // Current encumbrance - would need to calculate from inventory\n      max: carryingCapacity,\n      pct: 0,\n      encumbered: false,\n    };\n  }\n\n  /**\n   * Parse all items (equipment, spells, features)\n   */\n  private static parseAllItems(ddbCharacter: DDBCharacter): any[] {\n    const items: any[] = [];\n\n    // Parse equipment\n    items.push(...this.parseEquipment(ddbCharacter));\n\n    // Parse spells as items\n    items.push(...this.parseSpellItems(ddbCharacter));\n\n    // Parse features (simplified for now)\n    items.push(...this.parseFeatures(ddbCharacter));\n\n    Logger.info(`📦 Parsed ${items.length} total items`);\n    return items;\n  }\n\n  /**\n   * Parse active effects (simplified for now)\n   */\n  private static parseActiveEffects(ddbCharacter: DDBCharacter): any[] {\n    return [];\n  }\n\n  /**\n   * Parse character bonuses\n   */\n  private static parseBonuses(ddbCharacter: DDBCharacter): any {\n    return {\n      mwak: { attack: '', damage: '' },\n      rwak: { attack: '', damage: '' },\n      msak: { attack: '', damage: '' },\n      rsak: { attack: '', damage: '' },\n      abilities: { check: '', save: '', skill: '' },\n      spell: { dc: '' },\n    };\n  }\n\n  /**\n   * Parse equipment items\n   */\n  private static parseEquipment(ddbCharacter: DDBCharacter): any[] {\n    const items: any[] = [];\n\n    if (ddbCharacter.inventory) {\n      ddbCharacter.inventory.forEach(item => {\n        try {\n          const foundryItem = this.parseInventoryItem(item);\n          if (foundryItem) {\n            items.push(foundryItem);\n          }\n        } catch (error) {\n          Logger.error(`Equipment parsing error: ${(error as Error).message}`);\n        }\n      });\n    }\n\n    Logger.debug(`⚔️ Parsed ${items.length} equipment items`);\n    return items;\n  }\n\n  /**\n   * Parse individual inventory item\n   */\n  private static parseInventoryItem(ddbItem: DDBItem): any | null {\n    if (!ddbItem.definition) return null;\n\n    const definition = ddbItem.definition;\n    const itemType = this.getFoundryItemType(definition);\n\n    return {\n      name: definition.name,\n      type: itemType,\n      img: (definition as any).avatarUrl || this.getDefaultIcon(itemType),\n      system: {\n        description: { value: definition.description || '' },\n        quantity: ddbItem.quantity || 1,\n        weight: (definition.weight || 0) * ((definition as any).weightMultiplier || 1),\n        price: { value: definition.cost?.quantity || 0, denomination: 'gp' },\n        equipped: ddbItem.equipped || false,\n        rarity: definition.rarity?.toLowerCase() || 'common',\n        identified: true,\n        attuned: (ddbItem as any).isAttuned || false,\n      },\n      flags: {\n        'beyond-foundry': {\n          ddbId: definition.id,\n          ddbType: definition.type,\n          isHomebrew: (definition as any).isHomebrew || false,\n        },\n      },\n    };\n  }\n\n  /**\n   * Parse spell items\n   */\n  private static parseSpellItems(ddbCharacter: DDBCharacter): any[] {\n    const spellItems: any[] = [];\n\n    if (ddbCharacter.spells) {\n      Object.values(ddbCharacter.spells).forEach(spellArray => {\n        if (Array.isArray(spellArray)) {\n          spellArray.forEach(spell => {\n            try {\n              const spellItem = this.parseSpellItem(spell);\n              if (spellItem) {\n                spellItems.push(spellItem);\n              }\n            } catch (error) {\n              Logger.error(`Spell parsing error: ${(error as Error).message}`);\n            }\n          });\n        }\n      });\n    }\n\n    Logger.debug(`🔮 Parsed ${spellItems.length} spell items`);\n    return spellItems;\n  }\n\n  /**\n   * Parse individual spell item\n   */\n  private static parseSpellItem(ddbSpell: DDBSpell): any | null {\n    if (!ddbSpell.definition) return null;\n\n    const definition = ddbSpell.definition;\n\n    return {\n      name: definition.name,\n      type: 'spell',\n      img: 'icons/magic/symbols/rune-sigil-black-pink.webp',\n      system: {\n        description: { value: definition.description || '' },\n        level: definition.level || 0,\n        school: definition.school?.toLowerCase() || 'evocation',\n        components: {\n          vocal: definition.components?.verbal || false,\n          somatic: definition.components?.somatic || false,\n          material: definition.components?.material || false,\n          ritual: definition.ritual || false,\n          concentration: definition.concentration || false,\n        },\n        materials: { value: definition.components?.materialComponent || '' },\n        preparation: { mode: 'prepared', prepared: ddbSpell.prepared || false },\n        scaling: { mode: 'none', formula: '' },\n        range: { value: null, units: 'ft' },\n        target: { value: null, width: null, units: '', type: '' },\n        duration: { value: null, units: '' },\n        activation: { type: 'action', cost: 1, condition: '' },\n      },\n      flags: {\n        'beyond-foundry': {\n          ddbId: definition.id,\n          spellListId: (ddbSpell as any).spellListId,\n        },\n      },\n    };\n  }\n\n  /**\n   * Parse features (simplified for now)\n   */\n  private static parseFeatures(ddbCharacter: DDBCharacter): any[] {\n    const features: any[] = [];\n\n    try {\n      // Parse class features\n      if (ddbCharacter.classes && Array.isArray(ddbCharacter.classes)) {\n        for (const ddbClass of ddbCharacter.classes) {\n          if (ddbClass.classFeatures && Array.isArray(ddbClass.classFeatures)) {\n            for (const feature of ddbClass.classFeatures) {\n              features.push({\n                name: feature.name || 'Unknown Feature',\n                type: 'feat',\n                img: 'systems/dnd5e/icons/skills/light_01.jpg',\n                system: {\n                  description: {\n                    value: feature.description || '',\n                    chat: '',\n                    unidentified: '',\n                  },\n                  source: `${ddbClass.definition?.name || 'Class'} Level ${feature.requiredLevel || 1}`,\n                  activation: { type: '', cost: 0, condition: '' },\n                  duration: { value: null, units: '' },\n                  target: { value: null, width: null, units: '', type: '' },\n                  range: { value: null, long: null, units: '' },\n                  uses: { value: null, max: '', per: null, recovery: '' },\n                  consume: { type: '', target: null, amount: null },\n                  ability: null,\n                  actionType: '',\n                  attackBonus: '',\n                  chatFlavor: '',\n                  critical: { threshold: null, damage: '' },\n                  damage: { parts: [], versatile: '' },\n                  formula: '',\n                  save: { ability: '', dc: null, scaling: 'spell' },\n                  requirements: feature.prerequisite || '',\n                  recharge: { value: null, charged: false },\n                },\n                effects: [],\n                folder: null,\n                sort: 0,\n                ownership: { default: 0 },\n                flags: {\n                  'beyond-foundry': {\n                    type: 'classFeature',\n                    class: ddbClass.definition?.name || 'Unknown',\n                    level: feature.requiredLevel || 1,\n                    id: feature.id,\n                  },\n                },\n              });\n            }\n          }\n\n          // Parse subclass features\n          if (\n            ddbClass.subclassDefinition?.classFeatures &&\n            Array.isArray(ddbClass.subclassDefinition.classFeatures)\n          ) {\n            for (const feature of ddbClass.subclassDefinition.classFeatures) {\n              features.push({\n                name: feature.name || 'Unknown Subclass Feature',\n                type: 'feat',\n                img: 'systems/dnd5e/icons/skills/light_02.jpg',\n                system: {\n                  description: {\n                    value: feature.description || '',\n                    chat: '',\n                    unidentified: '',\n                  },\n                  source: `${ddbClass.subclassDefinition?.name || 'Subclass'} Level ${feature.requiredLevel || 1}`,\n                  activation: { type: '', cost: 0, condition: '' },\n                  duration: { value: null, units: '' },\n                  target: { value: null, width: null, units: '', type: '' },\n                  range: { value: null, long: null, units: '' },\n                  uses: { value: null, max: '', per: null, recovery: '' },\n                  consume: { type: '', target: null, amount: null },\n                  ability: null,\n                  actionType: '',\n                  attackBonus: '',\n                  chatFlavor: '',\n                  critical: { threshold: null, damage: '' },\n                  damage: { parts: [], versatile: '' },\n                  formula: '',\n                  save: { ability: '', dc: null, scaling: 'spell' },\n                  requirements: feature.prerequisite || '',\n                  recharge: { value: null, charged: false },\n                },\n                effects: [],\n                folder: null,\n                sort: 0,\n                ownership: { default: 0 },\n                flags: {\n                  'beyond-foundry': {\n                    type: 'subclassFeature',\n                    subclass: ddbClass.subclassDefinition?.name || 'Unknown',\n                    level: feature.requiredLevel || 1,\n                    id: feature.id,\n                  },\n                },\n              });\n            }\n          }\n        }\n      }\n\n      // Parse racial traits\n      if (ddbCharacter.race?.racialTraits && Array.isArray(ddbCharacter.race.racialTraits)) {\n        for (const trait of ddbCharacter.race.racialTraits) {\n          const definition = trait.definition;\n          if (definition) {\n            features.push({\n              name: definition.name || 'Unknown Racial Trait',\n              type: 'feat',\n              img: 'systems/dnd5e/icons/skills/yellow_03.jpg',\n              system: {\n                description: {\n                  value: definition.description || '',\n                  chat: definition.snippet || '',\n                  unidentified: '',\n                },\n                source: ddbCharacter.race?.fullName || 'Racial Trait',\n                activation: definition.activation\n                  ? {\n                      type: definition.activation.activationType || '',\n                      cost: definition.activation.activationTime || 0,\n                      condition: '',\n                    }\n                  : { type: '', cost: 0, condition: '' },\n                duration: { value: null, units: '' },\n                target: { value: null, width: null, units: '', type: '' },\n                range: { value: null, long: null, units: '' },\n                uses: { value: null, max: '', per: null, recovery: '' },\n                consume: { type: '', target: null, amount: null },\n                ability: null,\n                actionType: '',\n                attackBonus: '',\n                chatFlavor: '',\n                critical: { threshold: null, damage: '' },\n                damage: { parts: [], versatile: '' },\n                formula: '',\n                save: { ability: '', dc: null, scaling: 'spell' },\n                requirements: '',\n                recharge: { value: null, charged: false },\n              },\n              effects: [],\n              folder: null,\n              sort: 0,\n              ownership: { default: 0 },\n              flags: {\n                'beyond-foundry': {\n                  type: 'racialTrait',\n                  race: ddbCharacter.race?.fullName || 'Unknown',\n                  id: definition.id,\n                },\n              },\n            });\n          }\n        }\n      }\n\n      // Parse background feature\n      if (ddbCharacter.background?.definition?.featureName) {\n        features.push({\n          name: ddbCharacter.background.definition.featureName,\n          type: 'feat',\n          img: 'systems/dnd5e/icons/skills/green_01.jpg',\n          system: {\n            description: {\n              value: ddbCharacter.background.definition.featureDescription || '',\n              chat: '',\n              unidentified: '',\n            },\n            source: ddbCharacter.background.definition.name || 'Background',\n            activation: { type: '', cost: 0, condition: '' },\n            duration: { value: null, units: '' },\n            target: { value: null, width: null, units: '', type: '' },\n            range: { value: null, long: null, units: '' },\n            uses: { value: null, max: '', per: null, recovery: '' },\n            consume: { type: '', target: null, amount: null },\n            ability: null,\n            actionType: '',\n            attackBonus: '',\n            chatFlavor: '',\n            critical: { threshold: null, damage: '' },\n            damage: { parts: [], versatile: '' },\n            formula: '',\n            save: { ability: '', dc: null, scaling: 'spell' },\n            requirements: '',\n            recharge: { value: null, charged: false },\n          },\n          effects: [],\n          folder: null,\n          sort: 0,\n          ownership: { default: 0 },\n          flags: {\n            'beyond-foundry': {\n              type: 'backgroundFeature',\n              background: ddbCharacter.background.definition.name || 'Unknown',\n              id: ddbCharacter.background.definition.id,\n            },\n          },\n        });\n      }\n\n      // Parse feats (from various sources)\n      if (ddbCharacter.feats && Array.isArray(ddbCharacter.feats)) {\n        for (const feat of ddbCharacter.feats) {\n          if (feat.definition) {\n            features.push({\n              name: feat.definition.name || 'Unknown Feat',\n              type: 'feat',\n              img: 'systems/dnd5e/icons/skills/red_01.jpg',\n              system: {\n                description: {\n                  value: feat.definition.description || '',\n                  chat: feat.definition.snippet || '',\n                  unidentified: '',\n                },\n                source: 'Feat',\n                activation: { type: '', cost: 0, condition: '' },\n                duration: { value: null, units: '' },\n                target: { value: null, width: null, units: '', type: '' },\n                range: { value: null, long: null, units: '' },\n                uses: { value: null, max: '', per: null, recovery: '' },\n                consume: { type: '', target: null, amount: null },\n                ability: null,\n                actionType: '',\n                attackBonus: '',\n                chatFlavor: '',\n                critical: { threshold: null, damage: '' },\n                damage: { parts: [], versatile: '' },\n                formula: '',\n                save: { ability: '', dc: null, scaling: 'spell' },\n                requirements: feat.definition.prerequisite || '',\n                recharge: { value: null, charged: false },\n              },\n              effects: [],\n              folder: null,\n              sort: 0,\n              ownership: { default: 0 },\n              flags: {\n                'beyond-foundry': {\n                  type: 'feat',\n                  id: feat.definition.id,\n                },\n              },\n            });\n          }\n        }\n      }\n\n      // Parse optional class features if enabled\n      if (ddbCharacter.optionalClassFeatures && Array.isArray(ddbCharacter.optionalClassFeatures)) {\n        for (const feature of ddbCharacter.optionalClassFeatures) {\n          if (feature.definition) {\n            features.push({\n              name: feature.definition.name || 'Unknown Optional Feature',\n              type: 'feat',\n              img: 'systems/dnd5e/icons/skills/blue_01.jpg',\n              system: {\n                description: {\n                  value: feature.definition.description || '',\n                  chat: feature.definition.snippet || '',\n                  unidentified: '',\n                },\n                source: 'Optional Class Feature',\n                activation: { type: '', cost: 0, condition: '' },\n                duration: { value: null, units: '' },\n                target: { value: null, width: null, units: '', type: '' },\n                range: { value: null, long: null, units: '' },\n                uses: { value: null, max: '', per: null, recovery: '' },\n                consume: { type: '', target: null, amount: null },\n                ability: null,\n                actionType: '',\n                attackBonus: '',\n                chatFlavor: '',\n                critical: { threshold: null, damage: '' },\n                damage: { parts: [], versatile: '' },\n                formula: '',\n                save: { ability: '', dc: null, scaling: 'spell' },\n                requirements: feature.definition.prerequisite || '',\n                recharge: { value: null, charged: false },\n              },\n              effects: [],\n              folder: null,\n              sort: 0,\n              ownership: { default: 0 },\n              flags: {\n                'beyond-foundry': {\n                  type: 'optionalClassFeature',\n                  id: feature.definition.id,\n                },\n              },\n            });\n          }\n        }\n      }\n    } catch (error) {\n      Logger.error(`Error parsing features: ${error}`);\n    }\n\n    Logger.debug(`🎪 Parsed ${features.length} features`);\n    return features;\n  }\n}\n","import type {\n  DDBCharacter,\n  CharacterListResponse,\n  ImportResult,\n  AuthResponse,\n  ImportOptions,\n  DDBSpell,\n} from '../../types/index.js';\nimport { getModuleSettings } from '../utils/settings.js';\nimport { Logger, getErrorMessage } from '../utils/logger.js';\nimport { DEFAULT_IMPORT_OPTIONS } from '../constants.js';\nimport { CharacterParser } from '../../parsers/character/CharacterParser.js';\n\n/**\n * Main API class for Beyond Foundry module\n * Handles communication with ddb-proxy and data transformation\n */\nexport class BeyondFoundryAPI {\n  private static instance: BeyondFoundryAPI;\n  private proxyEndpoint: string = '';\n  private apiEndpoint: string = '';\n  private initialized: boolean = false;\n\n  private constructor() {}\n\n  /**\n   * Get singleton instance\n   */\n  public static getInstance(): BeyondFoundryAPI {\n    if (!BeyondFoundryAPI.instance) {\n      BeyondFoundryAPI.instance = new BeyondFoundryAPI();\n    }\n    return BeyondFoundryAPI.instance;\n  }\n\n  /**\n   * Initialize the API with current settings\n   */\n  public init(): void {\n    if (this.initialized) return;\n\n    const settings = getModuleSettings();\n    this.proxyEndpoint = settings.proxyUrl;\n    this.apiEndpoint = settings.apiEndpoint;\n    this.initialized = true;\n\n    Logger.info('BeyondFoundryAPI initialized');\n\n    // Test proxy connection on init\n    this.testProxyConnection().catch(error => {\n      Logger.warn(`Initial proxy connection test failed: ${error.message}`);\n    });\n  }\n\n  /**\n   * Test connection to ddb-proxy\n   */\n  public async testProxyConnection(): Promise<boolean> {\n    try {\n      Logger.debug(`Testing proxy connection to: ${this.proxyEndpoint}`);\n\n      const response = await fetch(`${this.proxyEndpoint}/ping`, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (response.ok) {\n        Logger.info('Proxy connection successful');\n        return true;\n      } else {\n        Logger.warn(`Proxy connection failed with status: ${response.status}`);\n        return false;\n      }\n    } catch (error) {\n      Logger.error(`Proxy connection error: ${getErrorMessage(error)}`);\n      return false;\n    }\n  }\n\n  /**\n   * Authenticate with D&D Beyond through proxy\n   * @param cobaltToken - The D&D Beyond Cobalt session token (optional, uses stored token if not provided)\n   */\n  public async authenticate(cobaltToken?: string): Promise<AuthResponse> {\n    try {\n      // Use provided token or get from settings\n      const token = cobaltToken || getModuleSettings().cobaltToken;\n\n      if (!token) {\n        return {\n          success: false,\n          message: 'No cobalt token provided. Please authenticate first.',\n        };\n      }\n\n      Logger.debug('Attempting authentication with D&D Beyond');\n\n      const response = await fetch(`${this.proxyEndpoint}/proxy/auth`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          cobalt: token,\n        }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        Logger.info('Authentication successful');\n        return {\n          success: true,\n          userId: data.userId,\n          message: 'Authentication successful',\n        };\n      } else {\n        Logger.warn(`Authentication failed: ${data.message || 'Unknown error'}`);\n        return {\n          success: false,\n          message: data.message || 'Authentication failed',\n        };\n      }\n    } catch (error) {\n      Logger.error(`Authentication error: ${getErrorMessage(error)}`);\n      return {\n        success: false,\n        message: `Authentication error: ${getErrorMessage(error)}`,\n      };\n    }\n  }\n\n  /**\n   * Get list of characters from D&D Beyond\n   * NOTE: ddb-proxy does not provide a character list endpoint.\n   * Users must provide character IDs manually from D&D Beyond URLs.\n   */\n  public async getCharacterList(): Promise<CharacterListResponse> {\n    Logger.warn('Character list not available through ddb-proxy');\n    Logger.info('To get characters:');\n    Logger.info('1. Go to dndbeyond.com/characters');\n    Logger.info('2. Find character IDs in URLs: dndbeyond.com/characters/{ID}');\n    Logger.info('3. Use importCharacter(characterId) or getCharacter(characterId)');\n\n    return {\n      success: false,\n      error:\n        'Character list endpoint not available in ddb-proxy. Use direct character IDs from D&D Beyond URLs (dndbeyond.com/characters/{ID}).',\n    };\n  }\n\n  /**\n   * Get character data from D&D Beyond\n   * @param characterId - The D&D Beyond character ID\n   */\n  public async getCharacter(characterId: string): Promise<DDBCharacter | null> {\n    try {\n      Logger.debug(`Fetching character data for ID: ${characterId}`);\n\n      const cobaltToken = getModuleSettings().cobaltToken;\n      if (!cobaltToken) {\n        Logger.error('No authentication token available. Please authenticate first.');\n        return null;\n      }\n\n      const response = await fetch(`${this.proxyEndpoint}/proxy/character`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          cobalt: cobaltToken,\n          characterId: parseInt(characterId),\n        }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        // Character data is nested under ddb.character\n        const character = data.ddb?.character;\n        if (character) {\n          Logger.info(`Retrieved character data for: ${character.name || 'Unknown'}`);\n          return character;\n        } else {\n          Logger.warn('Character data not found in response');\n          return null;\n        }\n      } else {\n        Logger.warn(`Failed to retrieve character: ${data.message || 'Unknown error'}`);\n        return null;\n      }\n    } catch (error) {\n      Logger.error(`Character fetch error: ${getErrorMessage(error)}`);\n      return null;\n    }\n  }\n\n  /**\n   * Import a character from D&D Beyond to FoundryVTT\n   * @param characterId - The D&D Beyond character ID\n   * @param options - Import options\n   */\n  public async importCharacter(\n    characterId: string,\n    options: Partial<ImportOptions> = {}\n  ): Promise<ImportResult> {\n    try {\n      Logger.info(`Starting character import for ID: ${characterId}`);\n\n      // Get character data from D&D Beyond\n      const ddbCharacter = await this.getCharacter(characterId);\n      if (!ddbCharacter) {\n        return {\n          success: false,\n          errors: ['Failed to fetch character data from D&D Beyond'],\n        };\n      }\n\n      // Merge options with defaults\n      const importOptions = { ...DEFAULT_IMPORT_OPTIONS, ...options };\n\n      // Parse character data to FoundryVTT format\n      const actorData = CharacterParser.parseCharacter(ddbCharacter);\n\n      // Check if character already exists\n      const existingActor = game.actors?.find(\n        actor => actor.getFlag('beyond-foundry', 'ddbCharacterId') === ddbCharacter.id\n      );\n\n      let actor: Actor;\n\n      if (existingActor) {\n        if (importOptions.updateExisting) {\n          Logger.info(`Updating existing character: ${existingActor.name}`);\n          await existingActor.update(actorData);\n          actor = existingActor;\n        } else {\n          return {\n            success: false,\n            errors: [\n              `Character \"${ddbCharacter.name}\" already exists. Use update option to overwrite.`,\n            ],\n            warnings: ['Character import skipped due to existing character'],\n          };\n        }\n      } else {\n        Logger.info(`Creating new character: ${ddbCharacter.name}`);\n        actor = (await Actor.create(actorData)) as Actor;\n      }\n\n      if (!actor) {\n        return {\n          success: false,\n          errors: ['Failed to create character in FoundryVTT'],\n        };\n      }\n\n      const warnings: string[] = [];\n\n      // Import spells if the character has any\n      if (importOptions.importSpells && ddbCharacter.spells) {\n        try {\n          // Count total spells across all spell lists\n          const totalSpells = Object.values(ddbCharacter.spells).reduce(\n            (sum, spellArray) => sum + (Array.isArray(spellArray) ? spellArray.length : 0),\n            0\n          );\n\n          if (totalSpells > 0) {\n            Logger.info(`Importing ${totalSpells} spells for character: ${actor.name}`);\n\n            const spellResults = await this.importCharacterSpells(\n              actor,\n              ddbCharacter,\n              importOptions\n            );\n            if (spellResults.warnings && spellResults.warnings.length > 0) {\n              warnings.push(...spellResults.warnings);\n            }\n            if (spellResults.errors && spellResults.errors.length > 0) {\n              warnings.push(`Some spells failed to import: ${spellResults.errors.join(', ')}`);\n            }\n          }\n        } catch (spellError) {\n          Logger.warn(`Spell import failed: ${getErrorMessage(spellError)}`);\n          warnings.push(`Spell import failed: ${getErrorMessage(spellError)}`);\n        }\n      }\n\n      Logger.info(`Successfully imported character: ${actor.name}`);\n\n      return {\n        success: true,\n        actor,\n        warnings,\n      };\n    } catch (error) {\n      Logger.error(`Character import error: ${getErrorMessage(error)}`);\n      return {\n        success: false,\n        errors: [`Character import error: ${getErrorMessage(error)}`],\n      };\n    }\n  }\n\n  /**\n   * Import character spells into FoundryVTT actor\n   * Enhanced implementation using ddb-proxy patterns\n   */\n  public async importCharacterSpells(\n    actor: Actor,\n    ddbCharacter: DDBCharacter,\n    options: Partial<ImportOptions> = {}\n  ): Promise<{ success: boolean; warnings?: string[]; errors?: string[] }> {\n    try {\n      const warnings: string[] = [];\n      const errors: string[] = [];\n\n      // Check if character has class data for spell fetching\n      if (!ddbCharacter.classes || ddbCharacter.classes.length === 0) {\n        return { success: true, warnings: ['No classes found for character - skipping spell import'] };\n      }\n\n      // Get cobalt token from settings\n      const settings = getModuleSettings();\n      if (!settings.cobaltToken) {\n        warnings.push('No cobalt token configured - cannot fetch spells from D&D Beyond');\n        return { success: true, warnings };\n      }\n\n      Logger.info(`🔮 Starting spell import for ${ddbCharacter.name}`);\n\n      let totalSpellsImported = 0;\n\n      // Process each spellcasting class\n      for (const classInfo of ddbCharacter.classes) {\n        if (!this.isSpellcastingClass(classInfo)) {\n          Logger.debug(`Skipping non-spellcasting class: ${classInfo.definition?.name}`);\n          continue;\n        }\n\n        try {\n          // Calculate spell level access for this class\n          const spellLevelAccess = this.calculateSpellLevelAccess(classInfo);\n          \n          if (spellLevelAccess === 0) {\n            Logger.debug(`Class ${classInfo.definition?.name} has no spell access yet`);\n            continue;\n          }\n\n          // Prepare class info for spell fetching\n          const fetchClassInfo = {\n            id: classInfo.definition?.id || 0,\n            name: classInfo.definition?.name || 'Unknown',\n            level: classInfo.level || 1,\n            spellLevelAccess,\n            ...(ddbCharacter.campaignId && { campaignId: ddbCharacter.campaignId }),\n            ...(ddbCharacter.background?.definition?.id && { backgroundId: ddbCharacter.background.definition.id })\n          };\n\n          Logger.debug(`Fetching spells for ${fetchClassInfo.name} (Level ${fetchClassInfo.level}, Spell Level Access: ${spellLevelAccess})`);\n\n          // Fetch spells for this class\n          const classSpells = await this.fetchCharacterSpells(\n            ddbCharacter.id,\n            settings.cobaltToken,\n            fetchClassInfo\n          );\n\n          if (classSpells.length > 0) {\n            // Parse and add spells to actor\n            const importedCount = await this.addSpellsToActor(actor, classSpells, options);\n            totalSpellsImported += importedCount;\n            \n            Logger.info(`✅ Imported ${importedCount} spells from ${fetchClassInfo.name}`);\n          }\n\n        } catch (classError) {\n          const errorMsg = `Failed to import spells for class ${classInfo.definition?.name}: ${getErrorMessage(classError)}`;\n          Logger.error(errorMsg);\n          errors.push(errorMsg);\n        }\n      }\n\n      if (totalSpellsImported > 0) {\n        Logger.info(`🎉 Successfully imported ${totalSpellsImported} total spells`);\n      } else {\n        warnings.push('No spells were imported - character may not have any spells or fetching failed');\n      }\n\n      return { \n        success: errors.length === 0, \n        ...(warnings.length > 0 && { warnings }),\n        ...(errors.length > 0 && { errors })\n      };\n\n    } catch (error) {\n      Logger.error(`Character spell import error: ${getErrorMessage(error)}`);\n      return {\n        success: false,\n        errors: [`Character spell import error: ${getErrorMessage(error)}`],\n      };\n    }\n  }\n\n  /**\n   * Fetch character spells from ddb-proxy\n   * Implements the spell extraction patterns from ddb-proxy spells.js\n   */\n  public async fetchCharacterSpells(\n    characterId: number,\n    cobaltToken: string,\n    classInfo?: {\n      id: number;\n      name: string;\n      level: number;\n      spellLevelAccess: number;\n      campaignId?: number;\n      backgroundId?: number;\n    }\n  ): Promise<DDBSpell[]> {\n    try {\n      if (!classInfo) {\n        Logger.warn('No class info provided for spell fetch');\n        return [];\n      }\n\n      Logger.debug(`Fetching spells for ${classInfo.name} (ID: ${classInfo.id}) at level ${classInfo.spellLevelAccess}`);\n\n      // Authenticate first\n      const authSuccess = await this.authenticate(cobaltToken);\n      if (!authSuccess.success) {\n        throw new Error('Authentication failed');\n      }\n\n      // Fetch class spells using ddb-proxy pattern\n      const spells = await this.extractSpells(classInfo, `${characterId}${cobaltToken}`);\n      \n      Logger.info(`Fetched ${spells.length} spells for ${classInfo.name}`);\n      return spells;\n\n    } catch (error) {\n      Logger.error(`Failed to fetch character spells: ${getErrorMessage(error)}`);\n      throw error;\n    }\n  }\n\n  /**\n   * Extract spells for a class (based on ddb-proxy extractSpells)\n   */\n  private async extractSpells(\n    classInfo: { id: number; name: string; spellLevelAccess: number; campaignId?: number },\n    cobaltId: string\n  ): Promise<DDBSpell[]> {\n    try {\n      const url = `${this.proxyEndpoint}/proxy/spells/${classInfo.id}?level=${classInfo.spellLevelAccess}&campaign=${classInfo.campaignId || ''}`;\n      \n      const response = await fetch(url, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${cobaltId}`,\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`Spell fetch failed: ${response.status} ${response.statusText}`);\n      }\n\n      const data = await response.json();\n\n      if (!data.success || !data.data) {\n        throw new Error(data.message || 'Invalid spell data received');\n      }\n\n      // Filter spells by level access and exclude certain sources (like UA)\n      const filteredSpells = data.data.filter((spell: DDBSpell) => {\n        // Filter by spell level access\n        if (spell.definition.level > classInfo.spellLevelAccess) {\n          return false;\n        }\n\n        // Filter out Unearthed Arcana (source ID 39) if needed\n        if (spell.definition.sources?.some((source: { sourceId: number }) => source.sourceId === 39)) {\n          return false;\n        }\n\n        return true;\n      });\n\n      Logger.debug(`Filtered ${filteredSpells.length} of ${data.data.length} spells for ${classInfo.name}`);\n      return filteredSpells;\n\n    } catch (error) {\n      Logger.error(`Extract spells error: ${getErrorMessage(error)}`);\n      throw error;\n    }\n  }\n\n  /**\n   * Extract always prepared spells (based on ddb-proxy extractAlwaysPreparedSpells)\n   */\n  public async extractAlwaysPreparedSpells(\n    classInfo: { id: number; name: string; spellLevelAccess: number; campaignId?: number },\n    spellListIds: number[] = []\n  ): Promise<DDBSpell[]> {\n    try {\n      const url = `${this.proxyEndpoint}/proxy/spells/always-prepared/${classInfo.id}?level=${classInfo.spellLevelAccess}&campaign=${classInfo.campaignId || ''}&spellLists=${spellListIds.join(',')}`;\n      \n      const response = await fetch(url, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`Always prepared spells fetch failed: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (!data.success || !data.data) {\n        throw new Error(data.message || 'Invalid always prepared spell data');\n      }\n\n      // Apply same filtering as regular spells\n      const filteredSpells = data.data.filter((spell: DDBSpell) => {\n        return spell.definition.level <= classInfo.spellLevelAccess &&\n               !spell.definition.sources?.some((source: { sourceId: number }) => source.sourceId === 39);\n      });\n\n      Logger.debug(`Found ${filteredSpells.length} always prepared spells for ${classInfo.name}`);\n      return filteredSpells;\n\n    } catch (error) {\n      Logger.error(`Extract always prepared spells error: ${getErrorMessage(error)}`);\n      return [];\n    }\n  }\n\n  /**\n   * Extract always known spells (based on ddb-proxy extractAlwaysKnownSpells)\n   */\n  public async extractAlwaysKnownSpells(\n    classInfo: { id: number; name: string; spellLevelAccess: number; campaignId?: number; backgroundId?: number },\n    cobaltId: string,\n    includeCantrips: boolean = true,\n    spellListIds: number[] = []\n  ): Promise<DDBSpell[]> {\n    try {\n      const url = `${this.proxyEndpoint}/proxy/spells/always-known/${classInfo.id}?level=${classInfo.spellLevelAccess}&campaign=${classInfo.campaignId || ''}&background=${classInfo.backgroundId || ''}&spellLists=${spellListIds.join(',')}&cantrips=${includeCantrips}`;\n      \n      const response = await fetch(url, {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${cobaltId}`,\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error(`Always known spells fetch failed: ${response.status}`);\n      }\n\n      const data = await response.json();\n\n      if (!data.success || !data.data) {\n        throw new Error(data.message || 'Invalid always known spell data');\n      }\n\n      // Filter cantrips if not wanted\n      let filteredSpells = data.data;\n      if (!includeCantrips) {\n        filteredSpells = filteredSpells.filter((spell: DDBSpell) => spell.definition.level > 0);\n      }\n\n      // Apply level and source filtering\n      filteredSpells = filteredSpells.filter((spell: DDBSpell) => {\n        return spell.definition.level <= classInfo.spellLevelAccess &&\n               !spell.definition.sources?.some((source: { sourceId: number }) => source.sourceId === 39);\n      });\n\n      Logger.debug(`Found ${filteredSpells.length} always known spells for ${classInfo.name}`);\n      return filteredSpells;\n\n    } catch (error) {\n      Logger.error(`Extract always known spells error: ${getErrorMessage(error)}`);\n      return [];\n    }\n  }\n\n  /**\n   * Test method for development\n   * Quick test of API connectivity with existing ddb-proxy\n   */\n  public async runConnectionTest(): Promise<void> {\n    Logger.info('Running Beyond Foundry connection test...');\n\n    // Test 1: Proxy connection\n    const proxyTest = await this.testProxyConnection();\n    ui.notifications.info(`Proxy connection: ${proxyTest ? 'SUCCESS' : 'FAILED'}`);\n\n    // Test 2: Authentication (if token available)\n    try {\n      const cobaltToken = getModuleSettings().cobaltToken;\n      if (cobaltToken) {\n        const authResult = await this.authenticate(cobaltToken);\n        ui.notifications.info(`Authentication: ${authResult.success ? 'SUCCESS' : 'FAILED'}`);\n        if (!authResult.success) {\n          Logger.warn(`Authentication failed: ${authResult.message}`);\n        }\n      } else {\n        ui.notifications.warn('Authentication: SKIPPED (No cobalt token configured)');\n        Logger.info('To test authentication, configure your cobalt token in module settings');\n      }\n    } catch (error) {\n      ui.notifications.error(`Authentication test failed: ${getErrorMessage(error)}`);\n    }\n\n    // Explain character testing\n    Logger.info('\\n💡 Character Testing:');\n    Logger.info('Character list is not available through ddb-proxy.');\n    Logger.info('To test character import:');\n    Logger.info('1. Get character ID from D&D Beyond URL: dndbeyond.com/characters/{ID}');\n    Logger.info(\n      '2. Use: game.modules.get(\"beyond-foundry\").api.quickTest(\"cobalt-token\", \"character-id\")'\n    );\n\n    Logger.info('Connection test complete');\n  }\n\n  /**\n   * Quick authentication and character test\n   * @param cobaltToken - Your D&D Beyond CobaltSession cookie value\n   * @param characterId - Optional specific character ID to test with\n   */\n  public async quickTest(cobaltToken: string, characterId?: string): Promise<void> {\n    Logger.info('Running quick authentication test...');\n\n    try {\n      // Test authentication\n      const authResult = await this.authenticate(cobaltToken);\n      if (!authResult.success) {\n        ui.notifications.error(`Authentication failed: ${authResult.message}`);\n        return;\n      }\n\n      ui.notifications.info('✅ Authentication successful!');\n      Logger.info(`✅ Authenticated as user ID: ${authResult.userId}`);\n\n      // Test character retrieval if ID provided\n      if (characterId) {\n        Logger.info(`Testing character retrieval for ID: ${characterId}...`);\n        const character = await this.getCharacter(characterId);\n\n        if (character) {\n          ui.notifications.info(`✅ Character found: ${character.name}`);\n          Logger.info(`✅ Character Details:`);\n          Logger.info(`  - Name: ${character.name}`);\n          Logger.info(`  - Race: ${character.race?.fullName || 'Unknown'}`);\n          Logger.info(\n            `  - Classes: ${character.classes?.map(c => `${c.definition?.name} ${c.level}`).join(', ') || 'Unknown'}`\n          );\n          Logger.info(`  - Background: ${character.background?.definition?.name || 'Unknown'}`);\n          Logger.info(`  - HP: ${character.baseHitPoints || 'Unknown'}`);\n\n          Logger.info(`\\n💡 To import this character, run:`);\n          Logger.info(`game.modules.get(\"beyond-foundry\").api.importCharacter(\"${characterId}\")`);\n        } else {\n          ui.notifications.warn(`❌ Failed to retrieve character with ID: ${characterId}`);\n          Logger.warn('Make sure the character ID is correct and accessible with your account');\n        }\n      } else {\n        // Explain how to get character IDs\n        Logger.info('\\n📋 To test character import:');\n        Logger.info('1. Go to dndbeyond.com/characters');\n        Logger.info('2. Click on a character');\n        Logger.info('3. Copy the ID from the URL: dndbeyond.com/characters/{ID}');\n        Logger.info(\n          '4. Run: game.modules.get(\"beyond-foundry\").api.quickTest(\"your-cobalt-token\", \"character-id\")'\n        );\n      }\n    } catch (error) {\n      ui.notifications.error(`Quick test failed: ${getErrorMessage(error)}`);\n      Logger.error(`Quick test error: ${getErrorMessage(error)}`);\n    }\n  }\n\n  /**\n   * Development testing interface - comprehensive system test\n   * Tests all major functionality in sequence\n   */\n  public async runFullSystemTest(): Promise<void> {\n    Logger.info('🧪 Starting comprehensive system test...');\n\n    try {\n      // Test 1: Proxy Connection\n      Logger.info('📡 Test 1: Proxy Connection');\n      const proxyOk = await this.testProxyConnection();\n      if (proxyOk) {\n        Logger.info('✅ Proxy connection: PASS');\n      } else {\n        Logger.error('❌ Proxy connection: FAIL');\n        return;\n      }\n\n      // Test 2: Settings validation\n      Logger.info('⚙️  Test 2: Settings Validation');\n      const settings = getModuleSettings();\n      Logger.info(`Proxy URL: ${settings.proxyUrl}`);\n      Logger.info(`Debug Mode: ${settings.debugMode}`);\n      \n      if (!settings.cobaltToken) {\n        Logger.warn('⚠️  No cobalt token configured - authentication tests will be skipped');\n        Logger.info('Set token in module settings or run: api.quickTest(\"your-token\")');\n      }\n\n      // Test 3: Authentication (if token available)\n      if (settings.cobaltToken) {\n        Logger.info('🔐 Test 3: Authentication');\n        const authResult = await this.authenticate();\n        if (authResult.success) {\n          Logger.info(`✅ Authentication: PASS (User ID: ${authResult.userId || 'Unknown'})`);\n        } else {\n          Logger.error(`❌ Authentication: FAIL (${authResult.message})`);\n          return;\n        }\n      }\n\n      // Test 4: Parser functionality\n      Logger.info('🔧 Test 4: Parser Functionality Available');\n      Logger.info('✅ CharacterParser: Ready');\n      Logger.info('✅ SpellParser: Ready');\n\n      // Test 5: UI Components\n      Logger.info('🖥️  Test 5: UI Components');\n      Logger.info('✅ Character Import Dialog: Available');\n      Logger.info('✅ Auth Dialog: Available');\n      Logger.info('✅ Settings Interface: Available');\n\n      // Summary\n      Logger.info('\\n🎉 System test completed!');\n      Logger.info('\\n📋 Next Steps:');\n      Logger.info('1. Configure cobalt token in settings if not done');\n      Logger.info('2. Test character import: api.importCharacter(\"character-id\")');\n      Logger.info('3. Open import dialog: new CharacterImportDialog().render(true)');\n\n    } catch (error) {\n      Logger.error(`System test failed: ${getErrorMessage(error)}`);\n    }\n  }\n\n  /**\n   * Quick diagnostic for troubleshooting\n   */\n  public async runDiagnostic(): Promise<void> {\n    Logger.info('🔍 Beyond Foundry Diagnostic');\n    Logger.info('='.repeat(40));\n\n    // Environment info\n    Logger.info(`System: ${game.system.id}`);\n\n    // Settings\n    const settings = getModuleSettings();\n    Logger.info(`\\nSettings:`);\n    Logger.info(`  Proxy URL: ${settings.proxyUrl}`);\n    Logger.info(`  Has Token: ${settings.cobaltToken ? 'Yes' : 'No'}`);\n    Logger.info(`  Debug Mode: ${settings.debugMode}`);\n\n    // Network test\n    Logger.info('\\nNetwork Test:');\n    const proxyOk = await this.testProxyConnection();\n    Logger.info(`  Proxy Connection: ${proxyOk ? '✅ OK' : '❌ FAIL'}`);\n\n    Logger.info('\\n💡 Useful Commands:');\n    Logger.info('  api.runFullSystemTest() - Complete system test');\n    Logger.info('  api.quickTest(\"token\", \"characterId\") - Quick auth and character test');\n    Logger.info('  new CharacterImportDialog().render(true) - Open import dialog');\n  }\n\n  /**\n   * Check if a D&D class is a spellcasting class\n   */\n  private isSpellcastingClass(classInfo: { definition?: { name?: string; spellRules?: unknown }; subclass?: { definition?: { name?: string } } }): boolean {\n    if (!classInfo.definition) return false;\n    \n    // Common spellcasting classes\n    const spellcastingClasses = [\n      'Artificer', 'Bard', 'Cleric', 'Druid', 'Paladin', 'Ranger', \n      'Sorcerer', 'Warlock', 'Wizard', 'Eldritch Knight', 'Arcane Trickster'\n    ];\n    \n    const className = classInfo.definition?.name || '';\n    const subclassName = classInfo.subclass?.definition?.name || '';\n    \n    return spellcastingClasses.includes(className) || \n           spellcastingClasses.includes(subclassName) ||\n           !!classInfo.definition?.spellRules;\n  }\n\n  /**\n   * Calculate spell level access for a class (based on ddb-proxy patterns)\n   */\n  private calculateSpellLevelAccess(classInfo: { definition?: { name?: string }; level?: number; subclass?: { definition?: { name?: string } } }): number {\n    if (!classInfo.definition || !classInfo.level) return 0;\n    \n    const classLevel = classInfo.level || 0;\n    const className = classInfo.definition?.name || '';\n    \n    // Full casters (Wizard, Sorcerer, etc.)\n    const fullCasters = ['Bard', 'Cleric', 'Druid', 'Sorcerer', 'Wizard', 'Warlock'];\n    if (fullCasters.includes(className)) {\n      if (classLevel >= 17) return 9;\n      if (classLevel >= 15) return 8;\n      if (classLevel >= 13) return 7;\n      if (classLevel >= 11) return 6;\n      if (classLevel >= 9) return 5;\n      if (classLevel >= 7) return 4;\n      if (classLevel >= 5) return 3;\n      if (classLevel >= 3) return 2;\n      if (classLevel >= 1) return 1;\n    }\n    \n    // Half casters (Paladin, Ranger)\n    const halfCasters = ['Paladin', 'Ranger'];\n    if (halfCasters.includes(className)) {\n      if (classLevel >= 17) return 5;\n      if (classLevel >= 13) return 4;\n      if (classLevel >= 9) return 3;\n      if (classLevel >= 5) return 2;\n      if (classLevel >= 2) return 1;\n    }\n    \n    // Third casters (Eldritch Knight, Arcane Trickster)\n    const thirdCasters = ['Eldritch Knight', 'Arcane Trickster'];\n    const subclassName = classInfo.subclass?.definition?.name || '';\n    if (thirdCasters.includes(subclassName)) {\n      if (classLevel >= 19) return 4;\n      if (classLevel >= 13) return 3;\n      if (classLevel >= 7) return 2;\n      if (classLevel >= 3) return 1;\n    }\n    \n    // Artificer (unique progression)\n    if (className === 'Artificer') {\n      if (classLevel >= 17) return 5;\n      if (classLevel >= 13) return 4;\n      if (classLevel >= 9) return 3;\n      if (classLevel >= 5) return 2;\n      if (classLevel >= 1) return 1;\n    }\n    \n    return 0;\n  }\n\n  /**\n   * Add spells to a Foundry actor using SpellParser\n   */\n  private async addSpellsToActor(\n    actor: Actor, \n    spells: DDBSpell[], \n    options: Partial<ImportOptions>\n  ): Promise<number> {\n    try {\n      // Import SpellParser dynamically to avoid circular dependencies\n      const { SpellParser } = await import('../../parsers/spells/SpellParser.js');\n      \n      let importedCount = 0;\n      \n      for (const ddbSpell of spells) {\n        try {\n          // Parse spell to Foundry format\n          const foundrySpell = SpellParser.parseSpell(ddbSpell);\n          \n          // Check if spell already exists\n          const existingSpell = actor.items.find(\n            (item: any) => item.type === 'spell' && \n                   item.getFlag('beyond-foundry', 'ddbId') === ddbSpell.id\n          );\n          \n          if (existingSpell && !options.updateExisting) {\n            Logger.debug(`Skipping existing spell: ${foundrySpell.name}`);\n            continue;\n          }\n          \n          // Add DDB metadata\n          foundrySpell.flags = {\n            'beyond-foundry': {\n              ddbId: ddbSpell.id,\n              sourceId: ddbSpell.definition.id,\n              prepared: ddbSpell.prepared,\n              alwaysPrepared: false,\n              usesSpellSlot: ddbSpell.usesSpellSlot,\n              castAtLevel: ddbSpell.castAtLevel || null,\n              restriction: null\n            }\n          };\n          \n          if (existingSpell) {\n            await existingSpell.update(foundrySpell);\n            Logger.debug(`Updated spell: ${foundrySpell.name}`);\n          } else {\n            await Item.create(foundrySpell as any, { parent: actor });\n            Logger.debug(`Created spell: ${foundrySpell.name}`);\n          }\n          \n          importedCount++;\n          \n        } catch (spellError) {\n          Logger.warn(`Failed to import spell ${ddbSpell.definition?.name}: ${getErrorMessage(spellError)}`);\n        }\n      }\n      \n      return importedCount;\n      \n    } catch (error) {\n      Logger.error(`Failed to add spells to actor: ${getErrorMessage(error)}`);\n      return 0;\n    }\n  }\n}\n","import { MODULE_ID } from '../constants.js';\nimport { Logger, getErrorMessage } from '../utils/logger.js';\nimport { BeyondFoundryAPI } from '../api/BeyondFoundryAPI.js';\n\n/**\n * Authentication dialog for D&D Beyond integration\n * Handles Cobalt token input and validation\n */\nexport class AuthDialog extends Application {\n  static override get defaultOptions(): ApplicationOptions {\n    return mergeObject(super.defaultOptions, {\n      id: `${MODULE_ID}-auth-dialog`,\n      title: 'D&D Beyond Authentication',\n      template: 'modules/beyond-foundry/templates/auth-dialog.hbs',\n      width: 500,\n      height: 'auto',\n      classes: ['beyond-foundry', 'auth-dialog'],\n      resizable: false,\n      minimizable: false,\n      closeOnSubmit: false,\n      submitOnChange: false,\n      submitOnClose: false,\n    });\n  }\n\n  /**\n   * Activate event listeners\n   */\n  override activateListeners(html: JQuery): void {\n    super.activateListeners(html);\n\n    // Handle form submission\n    html.find('form').on('submit', this._onSubmitAuth.bind(this));\n\n    // Handle test connection button\n    html.find('.test-connection').on('click', this._onTestConnection.bind(this));\n\n    // Handle help button\n    html.find('.help-button').on('click', this._onShowHelp.bind(this));\n  }\n\n  /**\n   * Handle authentication form submission\n   */\n  private async _onSubmitAuth(event: Event): Promise<void> {\n    event.preventDefault();\n\n    const form = event.target as HTMLFormElement;\n    const formData = new FormData(form);\n    const cobaltToken = formData.get('cobaltToken') as string;\n\n    if (!cobaltToken || cobaltToken.trim() === '') {\n      ui.notifications.error('Please enter your Cobalt session token');\n      return;\n    }\n\n    try {\n      Logger.info('Attempting D&D Beyond authentication...');\n\n      // Show loading state\n      const submitButton = form.querySelector('button[type=\"submit\"]') as HTMLButtonElement;\n      const originalText = submitButton.textContent;\n      submitButton.textContent = 'Authenticating...';\n      submitButton.disabled = true;\n\n      const api = BeyondFoundryAPI.getInstance();\n      const result = await api.authenticate(cobaltToken.trim());\n\n      if (result.success) {\n        ui.notifications.info('Authentication successful!');\n\n        // Store token in settings for future use\n        await game.settings.set(MODULE_ID, 'cobaltToken', cobaltToken.trim());\n\n        this.close();\n      } else {\n        ui.notifications.error(`Authentication failed: ${result.message}`);\n      }\n\n      // Restore button state\n      submitButton.textContent = originalText;\n      submitButton.disabled = false;\n    } catch (error) {\n      Logger.error(`Authentication error: ${getErrorMessage(error)}`);\n      ui.notifications.error(`Authentication error: ${getErrorMessage(error)}`);\n    }\n  }\n\n  /**\n   * Test proxy connection\n   */\n  private async _onTestConnection(event: Event): Promise<void> {\n    event.preventDefault();\n\n    try {\n      const api = BeyondFoundryAPI.getInstance();\n      const connected = await api.testProxyConnection();\n\n      if (connected) {\n        ui.notifications.info('Proxy connection successful!');\n      } else {\n        ui.notifications.error('Proxy connection failed. Check your ddb-proxy setup.');\n      }\n    } catch (error) {\n      Logger.error(`Connection test error: ${getErrorMessage(error)}`);\n      ui.notifications.error(`Connection test failed: ${getErrorMessage(error)}`);\n    }\n  }\n\n  /**\n   * Show help information\n   */\n  private _onShowHelp(event: Event): void {\n    event.preventDefault();\n\n    new Dialog({\n      title: 'Getting Your Cobalt Token',\n      content: `\n        <div class=\"beyond-foundry-help\">\n          <h3>How to find your Cobalt session token:</h3>\n          <ol>\n            <li>Log in to <a href=\"https://www.dndbeyond.com\" target=\"_blank\">D&D Beyond</a></li>\n            <li>Open your browser's Developer Tools (F12)</li>\n            <li>Go to the <strong>Application</strong> or <strong>Storage</strong> tab</li>\n            <li>Look for <strong>Cookies</strong> under the D&D Beyond domain</li>\n            <li>Find the cookie named <strong>CobaltSession</strong></li>\n            <li>Copy its value (should be a long string)</li>\n          </ol>\n          <p><strong>Important:</strong> Keep this token private! It provides access to your D&D Beyond account.</p>\n          <p><em>The token will expire periodically and you'll need to get a new one.</em></p>\n        </div>\n      `,\n      buttons: {\n        ok: {\n          label: 'Got it!',\n          callback: () => {},\n        },\n      },\n    }).render(true);\n  }\n\n  /**\n   * Get template data\n   */\n  override getData(): any {\n    return {\n      isConnected: false, // TODO: Check if already authenticated\n      proxyUrl: game.settings.get(MODULE_ID, 'proxyUrl'),\n    };\n  }\n\n  /**\n   * Static method to show authentication dialog\n   */\n  static show(): AuthDialog {\n    const dialog = new AuthDialog();\n    dialog.render(true);\n    return dialog;\n  }\n}\n","import { MODULE_ID } from '../constants.js';\nimport { Logger, getErrorMessage } from '../utils/logger.js';\nimport { BeyondFoundryAPI } from '../api/BeyondFoundryAPI.js';\nimport { AuthDialog } from './AuthDialog.js';\nimport type { DDBCharacter, ImportOptions } from '../../types/index.js';\n\ninterface PendingCharacter {\n  id: string;\n  loading: boolean;\n  loaded: boolean;\n  error?: string;\n  character?: DDBCharacter;\n}\n\n/**\n * Character import dialog for manual character ID input and importing\n */\nexport class CharacterImportDialog extends Application {\n  private pendingCharacters: Map<string, PendingCharacter> = new Map();\n  private loading: boolean = false;\n\n  static override get defaultOptions(): ApplicationOptions {\n    return mergeObject(super.defaultOptions, {\n      id: `${MODULE_ID}-character-import-dialog`,\n      title: 'Import D&D Beyond Characters',\n      template: 'modules/beyond-foundry/templates/character-import-dialog-v2.hbs',\n      width: 700,\n      height: 600,\n      classes: ['beyond-foundry', 'character-import-dialog'],\n      resizable: true,\n      minimizable: false,\n      closeOnSubmit: false,\n      submitOnChange: false,\n      submitOnClose: false,\n    });\n  }\n\n  /**\n   * Activate event listeners\n   */\n  override activateListeners(html: JQuery): void {\n    super.activateListeners(html);\n\n    // Authentication button\n    html.find('.authenticate').on('click', this._onAuthenticate.bind(this));\n\n    // Add single character button\n    html.find('.add-character-btn').on('click', this._onAddCharacter.bind(this));\n\n    // Add bulk characters button\n    html.find('.add-bulk-characters-btn').on('click', this._onAddBulkCharacters.bind(this));\n\n    // Remove character buttons (using event delegation for dynamic elements)\n    html.on('click', '.remove-character-btn', this._onRemoveCharacter.bind(this));\n\n    // Preview all characters button\n    html.find('.preview-all-btn').on('click', this._onPreviewAllCharacters.bind(this));\n\n    // Clear all characters button\n    html.find('.clear-all-btn').on('click', this._onClearAllCharacters.bind(this));\n\n    // Import characters button\n    html.find('.import-characters').on('click', this._onImportCharacters.bind(this));\n\n    // Enter key handling for character ID input\n    html.find('#character-id-input').on('keypress', event => {\n      if (event.which === 13) {\n        // Enter key\n        event.preventDefault();\n        // Create a fake event for compatibility\n        const fakeEvent = { preventDefault: () => {} } as Event;\n        this._onAddCharacter(fakeEvent);\n      }\n    });\n  }\n\n  /**\n   * Add a single character by ID\n   */\n  private async _onAddCharacter(event: Event): Promise<void> {\n    event.preventDefault();\n\n    const input = this.element.find('#character-id-input')[0] as HTMLInputElement;\n    const characterId = input.value.trim();\n\n    if (!characterId) {\n      ui.notifications.warn('Please enter a character ID');\n      return;\n    }\n\n    if (!/^\\d+$/.test(characterId)) {\n      ui.notifications.error('Character ID must be a number');\n      return;\n    }\n\n    if (this.pendingCharacters.has(characterId)) {\n      ui.notifications.warn('Character already added');\n      return;\n    }\n\n    // Add character to pending list\n    this.pendingCharacters.set(characterId, {\n      id: characterId,\n      loading: false,\n      loaded: false,\n    });\n\n    // Clear input\n    input.value = '';\n\n    // Re-render to show the new character\n    this.render();\n  }\n\n  /**\n   * Add multiple characters from bulk input\n   */\n  private async _onAddBulkCharacters(event: Event): Promise<void> {\n    event.preventDefault();\n\n    const textarea = this.element.find('#bulk-character-ids')[0] as HTMLTextAreaElement;\n    const text = textarea.value.trim();\n\n    if (!text) {\n      ui.notifications.warn('Please enter character IDs');\n      return;\n    }\n\n    const lines = text\n      .split('\\n')\n      .map(line => line.trim())\n      .filter(line => line.length > 0);\n    let added = 0;\n    let skipped = 0;\n\n    for (const line of lines) {\n      if (!/^\\d+$/.test(line)) {\n        ui.notifications.warn(`Skipping invalid character ID: ${line}`);\n        skipped++;\n        continue;\n      }\n\n      if (this.pendingCharacters.has(line)) {\n        skipped++;\n        continue;\n      }\n\n      this.pendingCharacters.set(line, {\n        id: line,\n        loading: false,\n        loaded: false,\n      });\n      added++;\n    }\n\n    // Clear textarea\n    textarea.value = '';\n\n    if (added > 0) {\n      ui.notifications.info(`Added ${added} character(s)`);\n    }\n\n    if (skipped > 0) {\n      ui.notifications.warn(`Skipped ${skipped} character(s) (invalid or already added)`);\n    }\n\n    // Re-render to show the new characters\n    this.render();\n  }\n\n  /**\n   * Remove a character from the pending list\n   */\n  private _onRemoveCharacter(event: Event): void {\n    event.preventDefault();\n\n    const button = event.target as HTMLElement;\n    const characterId =\n      button.dataset.characterId ||\n      button.closest('[data-character-id]')?.getAttribute('data-character-id');\n\n    if (characterId && this.pendingCharacters.has(characterId)) {\n      this.pendingCharacters.delete(characterId);\n      this.render();\n    }\n  }\n\n  /**\n   * Preview all characters (load their data)\n   */\n  private async _onPreviewAllCharacters(event: Event): Promise<void> {\n    event.preventDefault();\n\n    if (this.loading) return;\n\n    const unloadedCharacters = Array.from(this.pendingCharacters.values()).filter(\n      char => !char.loading && !char.loaded && !char.error\n    );\n\n    if (unloadedCharacters.length === 0) {\n      ui.notifications.info('All characters are already loaded');\n      return;\n    }\n\n    this.loading = true;\n\n    // Mark all as loading\n    for (const char of unloadedCharacters) {\n      char.loading = true;\n    }\n\n    this.render();\n\n    const api = BeyondFoundryAPI.getInstance();\n\n    // Load characters in parallel\n    const promises = unloadedCharacters.map(async char => {\n      try {\n        const result = await api.getCharacter(char.id);\n        if (result && result.success && result.character) {\n          char.character = result.character;\n          char.loaded = true;\n          delete char.error;\n        } else {\n          char.error = result?.error || 'Failed to load character';\n          char.loaded = false;\n        }\n      } catch (error) {\n        char.error = getErrorMessage(error);\n        char.loaded = false;\n      } finally {\n        char.loading = false;\n      }\n    });\n\n    await Promise.all(promises);\n\n    this.loading = false;\n    this.render();\n\n    const successful = unloadedCharacters.filter(char => char.loaded).length;\n    const failed = unloadedCharacters.length - successful;\n\n    if (successful > 0) {\n      ui.notifications.info(`Successfully loaded ${successful} character(s)`);\n    }\n\n    if (failed > 0) {\n      ui.notifications.warn(`Failed to load ${failed} character(s)`);\n    }\n  }\n\n  /**\n   * Clear all characters from the pending list\n   */\n  private _onClearAllCharacters(event: Event): void {\n    event.preventDefault();\n\n    this.pendingCharacters.clear();\n    this.render();\n  }\n\n  /**\n   * Open authentication dialog\n   */\n  private async _onAuthenticate(event: Event): Promise<void> {\n    event.preventDefault();\n\n    const authDialog = AuthDialog.show();\n\n    // Listen for successful authentication\n    authDialog.element.on('close', () => {\n      // Refresh the dialog to show updated auth status\n      this.render();\n    });\n  }\n\n  /**\n   * Get import options from form inputs\n   */\n  private _getImportOptions(): Partial<ImportOptions> {\n    const importSpells =\n      (this.element.find('#import-spells')[0] as HTMLInputElement)?.checked ?? true;\n    const importItems =\n      (this.element.find('#import-items')[0] as HTMLInputElement)?.checked ?? true;\n    const updateExisting =\n      (this.element.find('#update-existing')[0] as HTMLInputElement)?.checked ?? false;\n    const spellPreparationMode =\n      (this.element.find('#spell-preparation-mode')[0] as HTMLSelectElement)?.value ?? 'prepared';\n\n    return {\n      importSpells,\n      importItems,\n      updateExisting,\n      spellPreparationMode: spellPreparationMode as any,\n      createCompendiumItems: false, // Default to false for now\n    };\n  }\n\n  /**\n   * Import all loaded characters\n   */\n  private async _onImportCharacters(event: Event): Promise<void> {\n    event.preventDefault();\n\n    const readyCharacters = Array.from(this.pendingCharacters.values()).filter(\n      char => char.loaded && char.character\n    );\n\n    if (readyCharacters.length === 0) {\n      ui.notifications.warn('No characters are ready to import. Please preview characters first.');\n      return;\n    }\n\n    // Get import options from form\n    const importOptions = this._getImportOptions();\n\n    const button = event.target as HTMLButtonElement;\n    const originalText = button.textContent;\n    button.textContent = 'Importing...';\n    button.disabled = true;\n\n    try {\n      const api = BeyondFoundryAPI.getInstance();\n      const results = [];\n\n      for (const pendingChar of readyCharacters) {\n        Logger.info(`Importing character: ${pendingChar.character!.name} (ID: ${pendingChar.id})`);\n\n        const result = await api.importCharacter(pendingChar.id, importOptions);\n        results.push({\n          characterId: pendingChar.id,\n          characterName: pendingChar.character!.name,\n          result,\n        });\n      }\n\n      // Show results\n      const successful = results.filter(r => r.result.success).length;\n      const failed = results.length - successful;\n\n      if (successful > 0) {\n        ui.notifications.info(`Successfully imported ${successful} character(s)`);\n      }\n\n      if (failed > 0) {\n        ui.notifications.warn(`Failed to import ${failed} character(s)`);\n\n        // Log failed imports\n        results\n          .filter(r => !r.result.success)\n          .forEach(r => {\n            Logger.error(`Failed to import ${r.characterName}: ${r.result.errors?.join(', ')}`);\n          });\n      }\n\n      // Show spell import warnings if any\n      results.forEach(r => {\n        if (r.result.warnings && r.result.warnings.length > 0) {\n          Logger.warn(`Warnings for ${r.characterName}: ${r.result.warnings.join(', ')}`);\n        }\n      });\n\n      // Close dialog if all successful\n      if (failed === 0) {\n        this.close();\n      }\n    } catch (error) {\n      Logger.error(`Import error: ${getErrorMessage(error)}`);\n      ui.notifications.error(`Import failed: ${getErrorMessage(error)}`);\n    } finally {\n      button.textContent = originalText;\n      button.disabled = false;\n    }\n  }\n\n  /**\n   * Check if user is authenticated\n   */\n  private _isAuthenticated(): boolean {\n    const settings = game.settings.get(MODULE_ID, 'cobaltToken') as string;\n    return !!(settings && settings.trim() !== '');\n  }\n\n  /**\n   * Get template data\n   */\n  override getData(): any {\n    const pendingCharactersList = Array.from(this.pendingCharacters.values());\n    const readyToImport = pendingCharactersList.filter(char => char.loaded && char.character);\n\n    return {\n      isAuthenticated: this._isAuthenticated(),\n      pendingCharacters: pendingCharactersList,\n      readyToImport: readyToImport.length > 0,\n      readyCount: readyToImport.length,\n      loading: this.loading,\n    };\n  }\n\n  /**\n   * Static method to show character import dialog\n   */\n  static show(): CharacterImportDialog {\n    const dialog = new CharacterImportDialog();\n    dialog.render(true);\n    return dialog;\n  }\n}\n","import { MODULE_ID, MODULE_NAME } from './constants.js';\nimport { registerSettings } from './utils/settings.js';\nimport { Logger } from './utils/logger.js';\nimport { BeyondFoundryAPI } from './api/BeyondFoundryAPI.js';\nimport { CharacterImportDialog } from './apps/CharacterImportDialog.js';\n\n/**\n * Beyond Foundry Module Entry Point\n *\n * This module allows importing purchased D&D Beyond content into FoundryVTT\n * with support for characters, spells, items, and more.\n */\n\n// Initialize module when Foundry is ready\nHooks.once('init', async () => {\n  Logger.info(`Initializing ${MODULE_NAME}...`);\n\n  // Register module settings\n  registerSettings();\n\n  // Initialize API\n  const api = BeyondFoundryAPI.getInstance();\n\n  // Expose API globally for console access and other modules\n  (game as any).modules.get(MODULE_ID).api = api;\n\n  Logger.info(`${MODULE_NAME} initialized successfully`);\n});\n\n// Setup module when ready\nHooks.once('ready', async () => {\n  Logger.info(`${MODULE_NAME} ready`);\n\n  // Initialize API with current settings\n  const api = BeyondFoundryAPI.getInstance();\n  api.init();\n\n  // Add console message for developers\n  Logger.info('Access the API via: game.modules.get(\"beyond-foundry\").api');\n});\n\n// Add character sheet header button for import\nHooks.on('getActorSheetHeaderButtons', (app: any, buttons: any[]) => {\n  // Only add to character sheets in D&D 5e system\n  if (app.actor.type !== 'character' || game.system.id !== 'dnd5e') {\n    return;\n  }\n\n  buttons.unshift({\n    label: 'Import from D&D Beyond',\n    class: 'beyond-foundry-import',\n    icon: 'fas fa-download',\n    onclick: () => {\n      Logger.info('D&D Beyond import button clicked');\n      CharacterImportDialog.show();\n    },\n  });\n});\n\n// Add actor directory context menu option\nHooks.on('getActorDirectoryEntryContext', (html: any, options: any[]) => {\n  options.push({\n    name: 'Import from D&D Beyond',\n    icon: '<i class=\"fas fa-download\"></i>',\n    condition: () => game.system.id === 'dnd5e',\n    callback: () => {\n      Logger.info('D&D Beyond import context menu clicked');\n      CharacterImportDialog.show();\n    },\n  });\n});\n\n// Console command for testing (development)\nHooks.once('ready', () => {\n  if (game.settings.get(MODULE_ID, 'debugMode')) {\n    Logger.info('Debug mode enabled - test commands available');\n    Logger.info('Try: game.modules.get(\"beyond-foundry\").api.runConnectionTest()');\n  }\n});\n\nLogger.info(`${MODULE_NAME} module loaded`);\n"],"names":[],"mappings":"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"}